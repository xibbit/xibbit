{"version":3,"file":"socket.io.js","sources":["../node_modules/has-cors/index.js","../node_modules/engine.io-client/build/esm/globalThis.browser.js","../node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/build/esm/util.js","../node_modules/@socket.io/component-emitter/index.js","../node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js","../node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../node_modules/engine.io-client/node_modules/base64-arraybuffer/dist/base64-arraybuffer.es5.js","../node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js","../node_modules/engine.io-client/build/esm/transport.js","../node_modules/yeast/index.js","../node_modules/engine.io-client/node_modules/parseqs/index.js","../node_modules/engine.io-client/build/esm/transports/polling.js","../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","../node_modules/engine.io-client/build/esm/transports/websocket.js","../node_modules/engine.io-client/build/esm/transports/index.js","../node_modules/parseuri/index.js","../node_modules/engine.io-client/build/esm/socket.js","../node_modules/engine.io-client/build/esm/v3/xmlhttprequest.js","../node_modules/engine.io-client/build/esm/v3/engine.io-parser/utf8.js","../node_modules/engine.io-client/build/esm/v3/has-binary2/index.js","../node_modules/engine.io-client/build/esm/v3/after/index.js","../node_modules/engine.io-client/build/esm/v3/engine.io-parser/keys.js","../node_modules/engine.io-client/build/esm/v3/engine.io-parser/index.js","../node_modules/engine.io-client/build/esm/v3/component-emitter/index.js","../node_modules/engine.io-client/build/esm/v3/transport.js","../node_modules/engine.io-client/build/esm/v3/component-inherit/index.js","../node_modules/ms/index.js","../node_modules/debug/src/common.js","../node_modules/debug/src/browser.js","../node_modules/engine.io-client/build/esm/v3/transports/polling.js","../node_modules/engine.io-client/build/esm/v3/transports/polling-xhr.js","../node_modules/engine.io-client/build/esm/v3/transports/polling-jsonp.js","../node_modules/engine.io-client/build/esm/v3/transports/websocket.js","../node_modules/engine.io-client/build/esm/v3/transports/index.js","../node_modules/engine.io-client/build/esm/v3/socket.js","../node_modules/engine.io-client/build/esm/v3/index.js","../node_modules/engine.io-client/build/esm/index.js","../build/esm/url.js","../node_modules/socket.io-parser/build/esm/is-binary.js","../node_modules/socket.io-parser/build/esm/binary.js","../node_modules/socket.io-parser/build/esm/index.js","../build/esm/on.js","../build/esm/socket.js","../build/esm/contrib/backo2.js","../build/esm/manager.js","../build/esm/index.js","../build/esm/v3/url.js","../build/esm/v3/component-emitter/index.js","../build/esm/v3/isarray/index.js","../build/esm/v3/socket.io-parser/is-buffer.js","../build/esm/v3/socket.io-parser/binary.js","../build/esm/v3/socket.io-parser/index.js","../build/esm/v3/to-array/index.js","../build/esm/v3/on.js","../build/esm/v3/component-bind/index.js","../node_modules/parseqs/index.js","../build/esm/v3/has-binary2/index.js","../build/esm/v3/socket.js","../build/esm/v3/indexof/index.js","../build/esm/v3/backo2/index.js","../build/esm/v3/manager.js","../build/esm/v3/index.js","../build/esm/browser-entrypoint.js"],"sourcesContent":["\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","export default (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","// browser shim for xmlhttprequest module\nimport hasCORS from \"has-cors\";\nimport globalThis from \"../globalThis.js\";\nexport default function (opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import globalThis from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","\n/**\n * Expose `Emitter`.\n */\n\nexports.Emitter = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n","/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n//# sourceMappingURL=base64-arraybuffer.es5.js.map\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"base64-arraybuffer\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexport default decodePacket;\n","import encodePacket from \"./encodePacket.js\";\nimport decodePacket from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.readyState = \"\";\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} str\n     * @return {Transport} for chaining\n     * @api protected\n     */\n    onError(msg, desc) {\n        const err = new Error(msg);\n        // @ts-ignore\n        err.type = \"TransportError\";\n        // @ts-ignore\n        err.description = desc;\n        super.emit(\"error\", err);\n        return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n    open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n            this.readyState = \"opening\";\n            this.doOpen();\n        }\n        return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api public\n     */\n    close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api public\n     */\n    send(packets) {\n        if (\"open\" === this.readyState) {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @api protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emit(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @api protected\n     */\n    onPacket(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api protected\n     */\n    onClose() {\n        this.readyState = \"closed\";\n        super.emit(\"close\");\n    }\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","import { Transport } from \"../transport.js\";\nimport yeast from \"yeast\";\nimport parseqs from \"parseqs\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this.polling = false;\n    }\n    /**\n     * Transport name.\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emit(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n    onData(data) {\n        const callback = packet => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose();\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emit(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, data => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emit(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = parseqs.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n}\n","/* global attachEvent */\nimport XMLHttpRequest from \"./xmlhttprequest.js\";\nimport globalThis from \"../globalThis.js\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { Polling } from \"./polling.js\";\n/**\n * Empty function\n */\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false\n    });\n    return null != xhr.responseType;\n})();\nexport class XHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @api private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", err => {\n            this.onError(\"xhr post error\", err);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", err => {\n            this.onError(\"xhr poll error\", err);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n    create() {\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon successful response.\n     *\n     * @api private\n     */\n    onSuccess() {\n        this.emit(\"success\");\n        this.cleanup();\n    }\n    /**\n     * Called if we have data.\n     *\n     * @api private\n     */\n    onData(data) {\n        this.emit(\"data\", data);\n        this.onSuccess();\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n    onError(err) {\n        this.emit(\"error\", err);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.onData(data);\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import globalThis from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return cb => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport parseqs from \"parseqs\";\nimport yeast from \"yeast\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emit(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = this.onClose.bind(this);\n        this.ws.onmessage = ev => this.onData(ev.data);\n        this.ws.onerror = e => this.onError(\"websocket error\", e);\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, data => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emit(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = parseqs.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n    check() {\n        return (!!WebSocket &&\n            !(\"__initialize\" in WebSocket && this.name === WS.prototype.name));\n    }\n}\n","import { XHR } from \"./polling-xhr.js\";\nimport { WS } from \"./websocket.js\";\nexport const transports = {\n    websocket: WS,\n    polling: XHR\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport parseqs from \"parseqs\";\nimport parseuri from \"parseuri\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    constructor(uri, opts = {}) {\n        super();\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parseuri(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parseuri(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.readyState = \"\";\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true\n        }, opts);\n        this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = parseqs.decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                addEventListener(\"beforeunload\", () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                }, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\");\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n    createTransport(name) {\n        const query = clone(this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port\n        });\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", () => {\n            this.onClose(\"transport close\");\n        });\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", msg => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = err => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState &&\n            this.opts.upgrade &&\n            this.transport.pause) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @api private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api public\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n    onClose(reason, desc) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, desc);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\nfunction clone(obj) {\n    const o = {};\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            o[i] = obj[i];\n        }\n    }\n    return o;\n}\n","// browser shim for xmlhttprequest module\nimport hasCORS from 'has-cors';\nexport default function (opts) {\n    var xdomain = opts.xdomain;\n    // scheme must be same when usign XDomainRequest\n    // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n    var xscheme = opts.xscheme;\n    // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n    // https://github.com/Automattic/engine.io-client/pull/217\n    var enablesXDR = opts.enablesXDR;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    // Use XDomainRequest for IE8 if enablesXDR is true\n    // because loading bar keeps flashing when using jsonp-polling\n    // https://github.com/yujiosaka/socke.io-ie8-loading-example\n    try {\n        /*    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n              return new XDomainRequest();\n            }*/\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new self[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n        }\n        catch (e) { }\n    }\n}\n;\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\nvar stringFromCharCode = String.fromCharCode;\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n    var output = [];\n    var counter = 0;\n    var length = string.length;\n    var value;\n    var extra;\n    while (counter < length) {\n        value = string.charCodeAt(counter++);\n        if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n            // high surrogate, and there is a next character\n            extra = string.charCodeAt(counter++);\n            if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n                output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n            }\n            else {\n                // unmatched surrogate; only append this code unit, in case the next\n                // code unit is the high surrogate of a surrogate pair\n                output.push(value);\n                counter--;\n            }\n        }\n        else {\n            output.push(value);\n        }\n    }\n    return output;\n}\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n    var length = array.length;\n    var index = -1;\n    var value;\n    var output = '';\n    while (++index < length) {\n        value = array[index];\n        if (value > 0xFFFF) {\n            value -= 0x10000;\n            output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n            value = 0xDC00 | value & 0x3FF;\n        }\n        output += stringFromCharCode(value);\n    }\n    return output;\n}\nfunction checkScalarValue(codePoint, strict) {\n    if (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n        if (strict) {\n            throw Error('Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n                ' is not a scalar value');\n        }\n        return false;\n    }\n    return true;\n}\n/*--------------------------------------------------------------------------*/\nfunction createByte(codePoint, shift) {\n    return stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\nfunction encodeCodePoint(codePoint, strict) {\n    if ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n        return stringFromCharCode(codePoint);\n    }\n    var symbol = '';\n    if ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n        symbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n    }\n    else if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n        if (!checkScalarValue(codePoint, strict)) {\n            codePoint = 0xFFFD;\n        }\n        symbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n        symbol += createByte(codePoint, 6);\n    }\n    else if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n        symbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n        symbol += createByte(codePoint, 12);\n        symbol += createByte(codePoint, 6);\n    }\n    symbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n    return symbol;\n}\nfunction utf8encode(string, opts) {\n    opts = opts || {};\n    var strict = false !== opts.strict;\n    var codePoints = ucs2decode(string);\n    var length = codePoints.length;\n    var index = -1;\n    var codePoint;\n    var byteString = '';\n    while (++index < length) {\n        codePoint = codePoints[index];\n        byteString += encodeCodePoint(codePoint, strict);\n    }\n    return byteString;\n}\n/*--------------------------------------------------------------------------*/\nfunction readContinuationByte() {\n    if (byteIndex >= byteCount) {\n        throw Error('Invalid byte index');\n    }\n    var continuationByte = byteArray[byteIndex] & 0xFF;\n    byteIndex++;\n    if ((continuationByte & 0xC0) == 0x80) {\n        return continuationByte & 0x3F;\n    }\n    // If we end up here, it’s not a continuation byte\n    throw Error('Invalid continuation byte');\n}\nfunction decodeSymbol(strict) {\n    var byte1;\n    var byte2;\n    var byte3;\n    var byte4;\n    var codePoint;\n    if (byteIndex > byteCount) {\n        throw Error('Invalid byte index');\n    }\n    if (byteIndex == byteCount) {\n        return false;\n    }\n    // Read first byte\n    byte1 = byteArray[byteIndex] & 0xFF;\n    byteIndex++;\n    // 1-byte sequence (no continuation bytes)\n    if ((byte1 & 0x80) == 0) {\n        return byte1;\n    }\n    // 2-byte sequence\n    if ((byte1 & 0xE0) == 0xC0) {\n        byte2 = readContinuationByte();\n        codePoint = ((byte1 & 0x1F) << 6) | byte2;\n        if (codePoint >= 0x80) {\n            return codePoint;\n        }\n        else {\n            throw Error('Invalid continuation byte');\n        }\n    }\n    // 3-byte sequence (may include unpaired surrogates)\n    if ((byte1 & 0xF0) == 0xE0) {\n        byte2 = readContinuationByte();\n        byte3 = readContinuationByte();\n        codePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n        if (codePoint >= 0x0800) {\n            return checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n        }\n        else {\n            throw Error('Invalid continuation byte');\n        }\n    }\n    // 4-byte sequence\n    if ((byte1 & 0xF8) == 0xF0) {\n        byte2 = readContinuationByte();\n        byte3 = readContinuationByte();\n        byte4 = readContinuationByte();\n        codePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n            (byte3 << 0x06) | byte4;\n        if (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n            return codePoint;\n        }\n    }\n    throw Error('Invalid UTF-8 detected');\n}\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n    opts = opts || {};\n    var strict = false !== opts.strict;\n    byteArray = ucs2decode(byteString);\n    byteCount = byteArray.length;\n    byteIndex = 0;\n    var codePoints = [];\n    var tmp;\n    while ((tmp = decodeSymbol(strict)) !== false) {\n        codePoints.push(tmp);\n    }\n    return ucs2encode(codePoints);\n}\nconst version = '2.1.2';\nexport default {\n    version,\n    encode: utf8encode,\n    decode: utf8decode\n};\n","/* global Blob File */\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === 'function' ||\n    typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nconst withNativeFile = typeof File === 'function' ||\n    typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\nconst withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\nexport default function hasBinary(obj, b = false) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n        return true;\n    }\n    // see: https://github.com/Automattic/has-binary/pull/4\n    if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","export default function after(count, callback, err_cb = noop) {\n    var bail = false;\n    err_cb = err_cb || noop;\n    proxy.count = count;\n    return (count === 0) ? callback() : proxy;\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times');\n        }\n        --proxy.count;\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true;\n            callback(err);\n            // future error callbacks will go to error handler\n            callback = err_cb;\n        }\n        else if (proxy.count === 0 && !bail) {\n            callback(null, result);\n        }\n    }\n}\nfunction noop() { }\n","/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\nexport default Object.keys || function keys(obj) {\n    var arr = [];\n    var has = Object.prototype.hasOwnProperty;\n    for (var i in obj) {\n        if (has.call(obj, i)) {\n            arr.push(i);\n        }\n    }\n    return arr;\n};\n","/**\n * Module dependencies.\n */\nimport utf8 from './utf8';\nimport hasBinary from '../has-binary2';\nimport after from '../after';\nimport keys from './keys';\nclass Buffer extends Uint8Array {\n    constructor(length, encoding = '') {\n        super(length);\n        this.encoding = encoding;\n    }\n    static isBuffer(b) {\n        return b instanceof Uint8Array;\n    }\n    static concat(a) {\n        return [].concat.apply([], a);\n    }\n    writeUInt8(v, i) {\n        this[i] = v;\n    }\n}\n/**\n * Current protocol version.\n */\nconst protocol = 3;\n/**\n * Packet types.\n */\nvar packets = {\n    open: 0 // non-ws\n    ,\n    close: 1 // non-ws\n    ,\n    ping: 2,\n    pong: 3,\n    message: 4,\n    upgrade: 5,\n    noop: 6\n};\nvar packetslist = keys(packets);\n/**\n * Premade error packet.\n */\nvar err = { type: 'error', data: 'parser error' };\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\nconst encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n    if (typeof supportsBinary === 'function') {\n        callback = supportsBinary;\n        supportsBinary = null;\n    }\n    if (typeof utf8encode === 'function') {\n        callback = utf8encode;\n        utf8encode = null;\n    }\n    if (Buffer.isBuffer(packet.data)) {\n        return encodeBuffer(packet, supportsBinary, callback);\n    }\n    else if (packet.data && (packet.data.buffer || packet.data) instanceof ArrayBuffer) {\n        return encodeBuffer({ type: packet.type, data: arrayBufferToBuffer(packet.data) }, supportsBinary, callback);\n    }\n    // Sending data as a utf-8 string\n    var encoded = packets[packet.type];\n    // data fragment is optional\n    if (undefined !== packet.data) {\n        encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n    }\n    return callback('' + encoded);\n};\n/**\n * Encode Buffer data\n */\nfunction encodeBuffer(packet, supportsBinary, callback) {\n    if (!supportsBinary) {\n        return encodeBase64Packet(packet, callback);\n    }\n    var data = packet.data;\n    var typeBuffer = new Buffer(1);\n    typeBuffer[0] = packets[packet.type];\n    return callback(Buffer.concat([typeBuffer, data]));\n}\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\nconst encodeBase64Packet = function (packet, callback) {\n    var data = Buffer.isBuffer(packet.data) ? packet.data : arrayBufferToBuffer(packet.data);\n    var message = 'b' + packets[packet.type];\n    message += data.toString('base64');\n    return callback(message);\n};\n/**\n * Decodes a packet. Data also available as an ArrayBuffer if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\nconst decodePacket = function (data, binaryType, utf8decode = false) {\n    if (data === undefined) {\n        return err;\n    }\n    var type;\n    // String data\n    if (typeof data === 'string') {\n        type = data.charAt(0);\n        if (type === 'b') {\n            return decodeBase64Packet(data.substr(1), binaryType);\n        }\n        if (utf8decode) {\n            data = tryDecode(data);\n            if (data === false) {\n                return err;\n            }\n        }\n        if (Number(type) != type || !packetslist[type]) {\n            return err;\n        }\n        if (data.length > 1) {\n            return { type: packetslist[type], data: data.substring(1) };\n        }\n        else {\n            return { type: packetslist[type] };\n        }\n    }\n    // Binary data\n    if (binaryType === 'arraybuffer') {\n        // wrap Buffer/ArrayBuffer data into an Uint8Array\n        var intArray = new Uint8Array(data);\n        type = intArray[0];\n        return { type: packetslist[type], data: intArray.buffer.slice(1) };\n    }\n    if (data instanceof ArrayBuffer) {\n        data = arrayBufferToBuffer(data);\n    }\n    type = data[0];\n    return { type: packetslist[type], data: data.slice(1) };\n};\nfunction tryDecode(data) {\n    try {\n        data = utf8.decode(data, { strict: false });\n    }\n    catch (e) {\n        return false;\n    }\n    return data;\n}\n/**\n * Decodes a packet encoded in a base64 string.\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\nconst decodeBase64Packet = function (msg, binaryType) {\n    var type = packetslist[msg.charAt(0)];\n    var data = new Buffer(msg.substr(1), 'base64');\n    if (binaryType === 'arraybuffer') {\n        var abv = new Uint8Array(data.length);\n        for (var i = 0; i < abv.length; i++) {\n            abv[i] = data[i];\n        }\n        data = abv.buffer;\n    }\n    return { type: type, data: data };\n};\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\nconst encodePayload = function (packets, supportsBinary, callback) {\n    if (typeof supportsBinary === 'function') {\n        callback = supportsBinary;\n        supportsBinary = null;\n    }\n    if (supportsBinary && hasBinary(packets)) {\n        return encodePayloadAsBinary(packets, callback);\n    }\n    if (!packets.length) {\n        return callback('0:');\n    }\n    function encodeOne(packet, doneCallback) {\n        encodePacket(packet, supportsBinary, false, function (message) {\n            doneCallback(null, setLengthHeader(message));\n        });\n    }\n    map(packets, encodeOne, function (err, results) {\n        return callback(results.join(''));\n    });\n};\nfunction setLengthHeader(message) {\n    return message.length + ':' + message;\n}\n/**\n * Async array map using after\n */\nfunction map(ary, each, done) {\n    var result = new Array(ary.length);\n    var next = after(ary.length, done);\n    for (var i = 0; i < ary.length; i++) {\n        each(ary[i], function (error, msg) {\n            result[i] = msg;\n            next(error, result);\n        });\n    }\n}\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\nconst decodePayload = function (data, binaryType, callback) {\n    if (typeof data !== 'string') {\n        return decodePayloadAsBinary(data, binaryType, callback);\n    }\n    if (typeof binaryType === 'function') {\n        callback = binaryType;\n        binaryType = null;\n    }\n    if (data === '') {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n    }\n    var length = '', n, msg, packet;\n    for (var i = 0, l = data.length; i < l; i++) {\n        var chr = data.charAt(i);\n        if (chr !== ':') {\n            length += chr;\n            continue;\n        }\n        if (length === '' || (length != (n = Number(length)))) {\n            // parser error - ignoring payload\n            return callback(err, 0, 1);\n        }\n        msg = data.substr(i + 1, n);\n        if (length != msg.length) {\n            // parser error - ignoring payload\n            return callback(err, 0, 1);\n        }\n        if (msg.length) {\n            packet = decodePacket(msg, binaryType, false);\n            if (err.type === packet.type && err.data === packet.data) {\n                // parser error in individual packet - ignoring payload\n                return callback(err, 0, 1);\n            }\n            var more = callback(packet, i + n, l);\n            if (false === more)\n                return;\n        }\n        // advance cursor\n        i += n;\n        length = '';\n    }\n    if (length !== '') {\n        // parser error - ignoring payload\n        return callback(err, 0, 1);\n    }\n};\n/**\n *\n * Converts a buffer to a utf8.js encoded string\n *\n * @api private\n */\nfunction bufferToString(buffer) {\n    var str = '';\n    for (var i = 0, l = buffer.length; i < l; i++) {\n        str += String.fromCharCode(buffer[i]);\n    }\n    return str;\n}\n/**\n *\n * Converts a utf8.js encoded string to a buffer\n *\n * @api private\n */\nfunction stringToBuffer(string) {\n    var buf = new Buffer(string.length);\n    for (var i = 0, l = string.length; i < l; i++) {\n        buf.writeUInt8(string.charCodeAt(i), i);\n    }\n    return buf;\n}\n/**\n *\n * Converts an ArrayBuffer to a Buffer\n *\n * @api private\n */\nfunction arrayBufferToBuffer(data) {\n    // data is either an ArrayBuffer or ArrayBufferView.\n    var array = new Uint8Array(data.buffer || data);\n    var length = data.byteLength || data.length;\n    var offset = data.byteOffset || 0;\n    var buffer = new Buffer(length);\n    for (var i = 0; i < length; i++) {\n        buffer[i] = array[offset + i];\n    }\n    return buffer;\n}\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {Buffer} encoded payload\n * @api private\n */\nconst encodePayloadAsBinary = function (packets, callback) {\n    if (!packets.length) {\n        return callback(new Buffer(0));\n    }\n    map(packets, encodeOneBinaryPacket, function (err, results) {\n        return callback(Buffer.concat(results));\n    });\n};\nfunction encodeOneBinaryPacket(p, doneCallback) {\n    function onBinaryPacketEncode(packet) {\n        var encodingLength = '' + packet.length;\n        var sizeBuffer;\n        if (typeof packet === 'string') {\n            sizeBuffer = new Buffer(encodingLength.length + 2);\n            sizeBuffer[0] = 0; // is a string (not true binary = 0)\n            for (var i = 0; i < encodingLength.length; i++) {\n                sizeBuffer[i + 1] = parseInt(encodingLength[i], 10);\n            }\n            sizeBuffer[sizeBuffer.length - 1] = 255;\n            return doneCallback(null, Buffer.concat([sizeBuffer, stringToBuffer(packet)]));\n        }\n        sizeBuffer = new Buffer(encodingLength.length + 2);\n        sizeBuffer[0] = 1; // is binary (true binary = 1)\n        for (var i = 0; i < encodingLength.length; i++) {\n            sizeBuffer[i + 1] = parseInt(encodingLength[i], 10);\n        }\n        sizeBuffer[sizeBuffer.length - 1] = 255;\n        doneCallback(null, Buffer.concat([sizeBuffer, packet]));\n    }\n    encodePacket(p, true, true, onBinaryPacketEncode);\n}\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n\n * @param {Buffer} data, callback method\n * @api public\n */\nconst decodePayloadAsBinary = function (data, binaryType, callback) {\n    if (typeof binaryType === 'function') {\n        callback = binaryType;\n        binaryType = null;\n    }\n    var bufferTail = typeof data.length === 'undefined' ? new Uint8Array(data) : data;\n    var buffers = [];\n    var i;\n    while (bufferTail.length > 0) {\n        var strLen = '';\n        var isString = bufferTail[0] === 0;\n        for (i = 1;; i++) {\n            if (bufferTail[i] === 255)\n                break;\n            // 310 = char length of Number.MAX_VALUE\n            if (strLen.length > 310) {\n                return callback(err, 0, 1);\n            }\n            strLen += '' + bufferTail[i];\n        }\n        bufferTail = bufferTail.slice(strLen.length + 1);\n        var msgLength = parseInt(strLen, 10);\n        var msg = bufferTail.slice(1, msgLength + 1);\n        buffers.push(isString ? bufferToString(msg) : msg);\n        bufferTail = bufferTail.slice(msgLength + 1);\n    }\n    var total = buffers.length;\n    for (i = 0; i < total; i++) {\n        var buffer = buffers[i];\n        callback(decodePacket(buffer, binaryType, true), i, total);\n    }\n};\nexport default {\n    protocol,\n    packets,\n    encodePacket,\n    encodeBase64Packet,\n    decodePacket,\n    decodeBase64Packet,\n    encodePayload,\n    decodePayload,\n    encodePayloadAsBinary,\n    decodePayloadAsBinary,\n};\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\nfunction Emitter(obj) {\n    if (obj)\n        return mixin(obj);\n}\n;\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\nfunction mixin(obj) {\n    for (var key in Emitter.prototype) {\n        obj[key] = Emitter.prototype[key];\n    }\n    return obj;\n}\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.on =\n    Emitter.prototype.addEventListener = function (event, fn) {\n        this._callbacks = this._callbacks || {};\n        (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n            .push(fn);\n        return this;\n    };\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.once = function (event, fn) {\n    function on() {\n        this.off(event, on);\n        fn.apply(this, arguments);\n    }\n    on.fn = fn;\n    this.on(event, on);\n    return this;\n};\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.off =\n    Emitter.prototype.removeListener =\n        Emitter.prototype.removeAllListeners =\n            Emitter.prototype.removeEventListener = function (event, fn) {\n                this._callbacks = this._callbacks || {};\n                // all\n                if (0 == arguments.length) {\n                    this._callbacks = {};\n                    return this;\n                }\n                // specific event\n                var callbacks = this._callbacks['$' + event];\n                if (!callbacks)\n                    return this;\n                // remove all handlers\n                if (1 == arguments.length) {\n                    delete this._callbacks['$' + event];\n                    return this;\n                }\n                // remove specific handler\n                var cb;\n                for (var i = 0; i < callbacks.length; i++) {\n                    cb = callbacks[i];\n                    if (cb === fn || cb.fn === fn) {\n                        callbacks.splice(i, 1);\n                        break;\n                    }\n                }\n                // Remove event specific arrays for event types that no\n                // one is subscribed for to avoid memory leak.\n                if (callbacks.length === 0) {\n                    delete this._callbacks['$' + event];\n                }\n                return this;\n            };\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\nEmitter.prototype.emit = function (event) {\n    this._callbacks = this._callbacks || {};\n    var args = new Array(arguments.length - 1), callbacks = this._callbacks['$' + event];\n    for (var i = 1; i < arguments.length; i++) {\n        args[i - 1] = arguments[i];\n    }\n    if (callbacks) {\n        callbacks = callbacks.slice(0);\n        for (var i = 0, len = callbacks.length; i < len; ++i) {\n            callbacks[i].apply(this, args);\n        }\n    }\n    return this;\n};\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\nEmitter.prototype.listeners = function (event) {\n    this._callbacks = this._callbacks || {};\n    return this._callbacks['$' + event] || [];\n};\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\nEmitter.prototype.hasListeners = function (event) {\n    return !!this.listeners(event).length;\n};\n/**\n * Wrap the prototype-based class with a TypeScript class.\n */\nclass TypeScriptEmitter {\n    constructor(obj = null) {\n        this.emitter = Emitter(obj || this);\n    }\n    on(event, fn) {\n        return this.emitter.on(event, fn);\n    }\n    once(event, fn) {\n        return this.emitter.once(event, fn);\n    }\n    removeListener(event, fn) {\n        return this.emitter.removeListener(event, fn);\n    }\n    removeAllListeners(event = undefined, fn = undefined) {\n        return this.emitter.removeAllListeners(event, fn);\n    }\n    emit(event, data = undefined, desc = undefined) {\n        if (typeof desc !== 'undefined') {\n            return this.emitter.emit(event, data, desc);\n        }\n        if (typeof data !== 'undefined') {\n            return this.emitter.emit(event, data);\n        }\n        return this.emitter.emit(event);\n    }\n}\nexport { Emitter as default, TypeScriptEmitter, mixin, };\n","/**\n * Module dependencies.\n */\nimport parser from \"./engine.io-parser\";\nimport Emitter from \"./component-emitter\";\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\nfunction Transport(opts) {\n    this.path = opts.path;\n    this.hostname = opts.hostname;\n    this.port = opts.port;\n    this.secure = opts.secure;\n    this.query = opts.query;\n    this.timestampParam = opts.timestampParam;\n    this.timestampRequests = opts.timestampRequests;\n    this.readyState = '';\n    this.agent = opts.agent || false;\n    this.socket = opts.socket;\n    this.enablesXDR = opts.enablesXDR;\n    // SSL options for Node.js client\n    this.pfx = opts.pfx;\n    this.key = opts.key;\n    this.passphrase = opts.passphrase;\n    this.cert = opts.cert;\n    this.ca = opts.ca;\n    this.ciphers = opts.ciphers;\n    this.rejectUnauthorized = opts.rejectUnauthorized;\n    this.forceNode = opts.forceNode;\n    // results of ReactNative environment detection\n    this.isReactNative = opts.isReactNative;\n    // other options for Node.js client\n    this.extraHeaders = opts.extraHeaders;\n    this.localAddress = opts.localAddress;\n}\n/**\n * Mix in `Emitter`.\n */\nEmitter(Transport.prototype);\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\nTransport.prototype.onError = function (msg, desc) {\n    var err = new Error(msg);\n    err.type = 'TransportError';\n    err.description = desc;\n    this.emit('error', err);\n    return this;\n};\n/**\n * Opens the transport.\n *\n * @api public\n */\nTransport.prototype.open = function () {\n    if ('closed' === this.readyState || '' === this.readyState) {\n        this.readyState = 'opening';\n        this.doOpen();\n    }\n    return this;\n};\n/**\n * Closes the transport.\n *\n * @api private\n */\nTransport.prototype.close = function () {\n    if ('opening' === this.readyState || 'open' === this.readyState) {\n        this.doClose();\n        this.onClose();\n    }\n    return this;\n};\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\nTransport.prototype.send = function (packets) {\n    if ('open' === this.readyState) {\n        this.write(packets);\n    }\n    else {\n        throw new Error('Transport not open');\n    }\n};\n/**\n * Called upon open\n *\n * @api private\n */\nTransport.prototype.onOpen = function () {\n    this.readyState = 'open';\n    this.writable = true;\n    this.emit('open');\n};\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\nTransport.prototype.onData = function (data) {\n    var packet = parser.decodePacket(data, this.socket.binaryType);\n    this.onPacket(packet);\n};\n/**\n * Called with a decoded packet.\n */\nTransport.prototype.onPacket = function (packet) {\n    this.emit('packet', packet);\n};\n/**\n * Called with out of band data.\n */\nTransport.prototype.outOfBand = function (data) {\n    this.emit('outOfBand', data);\n};\n/**\n * Called upon close.\n *\n * @api private\n */\nTransport.prototype.onClose = function () {\n    this.readyState = 'closed';\n    this.emit('close');\n};\nexport { Transport, };\n","export default function (a, b) {\n    var fn = function () { };\n    fn.prototype = b.prototype;\n    a.prototype = new fn;\n    a.prototype.constructor = a;\n}\n;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","/**\n * Module dependencies.\n */\nimport { Transport } from \"../transport\";\nimport parseqs from \"parseqs\";\nimport parser from \"../engine.io-parser\";\nimport inherit from '../component-inherit';\nimport yeast from \"yeast\";\nimport debugModule from 'debug';\nvar debug = debugModule(\"engine.io-client:polling\");\n/**\n * Is XHR2 supported?\n */\n//var XMLHttpRequest = require('xmlhttprequest-ssl');\nimport XMLHttpRequest from \"../xmlhttprequest\";\nvar hasXHR2 = (function () {\n    var xhr = XMLHttpRequest({ xdomain: false });\n    return null != xhr.responseType;\n})();\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\nfunction Polling(opts) {\n    var forceBase64 = (opts && opts.forceBase64);\n    if (!hasXHR2 || forceBase64) {\n        this.supportsBinary = false;\n    }\n    Transport.call(this, opts);\n}\n/**\n * Inherits from Transport.\n */\ninherit(Polling, Transport);\n/**\n * Transport name.\n */\nPolling.prototype.name = 'polling';\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\nPolling.prototype.doOpen = function () {\n    this.poll();\n};\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\nPolling.prototype.pause = function (onPause) {\n    var self = this;\n    this.readyState = 'pausing';\n    function pause() {\n        debug('paused');\n        self.readyState = 'paused';\n        onPause();\n    }\n    if (this.polling || !this.writable) {\n        var total = 0;\n        if (this.polling) {\n            debug('we are currently polling - waiting to pause');\n            total++;\n            this.once('pollComplete', function () {\n                debug('pre-pause polling complete');\n                --total || pause();\n            });\n        }\n        if (!this.writable) {\n            debug('we are currently writing - waiting to pause');\n            total++;\n            this.once('drain', function () {\n                debug('pre-pause writing complete');\n                --total || pause();\n            });\n        }\n    }\n    else {\n        pause();\n    }\n};\n/**\n * Starts polling cycle.\n *\n * @api public\n */\nPolling.prototype.poll = function () {\n    debug('polling');\n    this.polling = true;\n    this.doPoll();\n    this.emit('poll');\n};\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\nPolling.prototype.onData = function (data) {\n    var self = this;\n    debug('polling got data %s', data);\n    var callback = function (packet, index, total) {\n        // if its the first message we consider the transport open\n        if ('opening' === self.readyState) {\n            self.onOpen();\n        }\n        // if its a close packet, we close the ongoing requests\n        if ('close' === packet.type) {\n            self.onClose();\n            return false;\n        }\n        // otherwise bypass onData and handle the message\n        self.onPacket(packet);\n    };\n    // decode payload\n    self.decodePayload(data, this.socket.binaryType, callback);\n    // if an event did not trigger closing\n    if ('closed' !== this.readyState) {\n        // if we got data we're not polling\n        this.polling = false;\n        this.emit('pollComplete');\n        if ('open' === this.readyState) {\n            this.poll();\n        }\n        else {\n            debug('ignoring poll - transport state \"%s\"', this.readyState);\n        }\n    }\n};\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\nPolling.prototype.doClose = function () {\n    var self = this;\n    function close() {\n        debug('writing close packet');\n        self.write([{ type: 'close' }]);\n    }\n    if ('open' === this.readyState) {\n        debug('transport open - closing');\n        close();\n    }\n    else {\n        // in case we're trying to close while\n        // handshaking is in progress (GH-164)\n        debug('transport not open - deferring close');\n        this.once('open', close);\n    }\n};\n/**\n * Removes out of band data and decodes the clean payload.\n *\n * @param {Array} data packets\n * @param {Object} typ type\n * @param {Function} callback parser callback\n * @api private\n */\nPolling.prototype.decodePayload = function (data, binaryType, callback) {\n    var self = this;\n    var cleanData = '';\n    var outOfBand = '';\n    var matchPos = [];\n    if (typeof data === 'string') {\n        data = data.substring(data.startsWith('ok') ? 2 : 0);\n        // find packets\n        var pos = data.indexOf(':');\n        while (pos !== -1) {\n            if ((pos > 0) && (pos < (data.length - 1))\n                && (data[pos - 1] >= '0') && (data[pos - 1] <= '9')\n                && (data[pos + 1] >= '0') && (data[pos + 1] <= '9')) {\n                matchPos.push(pos);\n            }\n            pos = data.indexOf(':', pos + 1);\n        }\n        // separate packets from out of band data\n        var prev = 0;\n        var start = 0;\n        var end = 0;\n        var del = 0;\n        var len = 0;\n        var heur = 0;\n        for (var m = 0; m < matchPos.length; ++m) {\n            start = matchPos[m] - del - 1;\n            end = start + 1;\n            while ((start >= 0) && (data[start] >= '0') && (data[start] <= '9')) {\n                len = parseInt(data.substring(start, end));\n                // heuristic to ignore extra outOfBand digit\n                heur = data.length;\n                if ((m + 1) < matchPos.length) {\n                    heur = matchPos[m + 1] - del - 1;\n                }\n                if ((end + len) >= heur) {\n                    break;\n                }\n                --start;\n            }\n            ++start;\n            if ((start >= 2) && (data.substring(start - 2, start) === 'ok')) {\n                data = data.substring(0, start - 2) + data.substring(start);\n                del += 2;\n                start -= 2;\n            }\n            end = matchPos[m] - del;\n            len = parseInt(data.substring(start, end));\n            cleanData += data.substring(start, end + len + 1);\n            outOfBand += data.substring(prev, start);\n            prev = end + len + 1;\n        }\n        if (prev < data.length) {\n            outOfBand += data.substring(prev);\n        }\n        // decode packets\n        if (cleanData) {\n            parser.decodePayload(cleanData, binaryType, callback);\n        }\n        if (outOfBand) {\n            self.outOfBand(outOfBand);\n        }\n    }\n    else if (data) {\n        parser.decodePayload(data, binaryType, callback);\n    }\n};\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\nPolling.prototype.write = function (packets) {\n    var self = this;\n    this.writable = false;\n    var callback = function (packet, index, total) {\n        // handle the message\n        self.onPacket(packet);\n    };\n    var callbackfn = function (data) {\n        self.decodePayload(data, self.socket.binaryType, callback);\n        self.writable = true;\n        self.emit('drain');\n    };\n    parser.encodePayload(packets, this.supportsBinary, function (data) {\n        self.doWrite(data, callbackfn);\n    });\n};\n/**\n * Generates uri for connection.\n *\n * @api private\n */\nPolling.prototype.uri = function () {\n    var query = this.query || {};\n    var schema = this.secure ? 'https' : 'http';\n    var port = '';\n    var path = (typeof this.path === 'function') ? this.path() : this.path;\n    // cache busting is forced\n    if (false !== this.timestampRequests) {\n        query[this.timestampParam] = yeast();\n    }\n    if (!this.supportsBinary && !query.sid) {\n        query.b64 = 1;\n    }\n    query = parseqs.encode(query);\n    // avoid port if default for schema\n    if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n        ('http' === schema && Number(this.port) !== 80))) {\n        port = ':' + this.port;\n    }\n    // prepend ? to query\n    if (query.length) {\n        query = '?' + query;\n    }\n    var ipv6 = this.hostname.indexOf(':') !== -1;\n    return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + path + query;\n};\nexport { Polling as default, };\n","/* global attachEvent */\n/**\n * Module requirements.\n */\n//import XMLHttpRequest from \"xmlhttprequest-ssl\";\nimport XMLHttpRequest from \"../xmlhttprequest\";\nimport Polling from \"./polling\";\nimport Emitter from \"../component-emitter\";\nimport inherit from '../component-inherit';\nimport debugModule from 'debug';\nvar debug = debugModule(\"engine.io-client:polling-xhr\");\n/**\n * Empty function\n */\nfunction empty() { }\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\nfunction XHR(opts) {\n    Polling.call(this, opts);\n    this.requestTimeout = opts.requestTimeout;\n    this.extraHeaders = opts.extraHeaders;\n    if (typeof location !== 'undefined') {\n        var isSSL = 'https:' === location.protocol;\n        var port = location.port;\n        // some user agents have empty `location.port`\n        if (!port) {\n            port = isSSL ? 443 : 80;\n        }\n        this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n            port !== opts.port;\n        this.xs = opts.secure !== isSSL;\n    }\n}\n/**\n * Inherits from Polling.\n */\ninherit(XHR, Polling);\n/**\n * XHR supports binary\n */\nXHR.prototype.supportsBinary = true;\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\nXHR.prototype.request = function (opts) {\n    opts = opts || {};\n    opts.uri = this.uri();\n    opts.xd = this.xd;\n    opts.xs = this.xs;\n    opts.agent = this.agent || false;\n    opts.supportsBinary = this.supportsBinary;\n    opts.enablesXDR = this.enablesXDR;\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n    opts.requestTimeout = this.requestTimeout;\n    // other options for Node.js client\n    opts.extraHeaders = this.extraHeaders;\n    return new Request(opts);\n};\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\nXHR.prototype.doWrite = function (data, fn) {\n    var isBinary = typeof data !== 'string' && data !== undefined;\n    var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n    var self = this;\n    req.on('data', fn);\n    req.on('error', function (err) {\n        self.onError('xhr post error', err);\n    });\n    this.sendXhr = req;\n};\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\nXHR.prototype.doPoll = function () {\n    debug('xhr poll');\n    var req = this.request();\n    var self = this;\n    req.on('data', function (data) {\n        self.onData(data);\n    });\n    req.on('error', function (err) {\n        self.onError('xhr poll error', err);\n    });\n    this.pollXhr = req;\n};\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\nfunction Request(opts) {\n    this.method = opts.method || 'GET';\n    this.uri = opts.uri;\n    this.xd = !!opts.xd;\n    this.xs = !!opts.xs;\n    this.async = false !== opts.async;\n    this.data = undefined !== opts.data ? opts.data : null;\n    this.agent = opts.agent;\n    this.isBinary = opts.isBinary;\n    this.supportsBinary = opts.supportsBinary;\n    this.enablesXDR = opts.enablesXDR;\n    this.requestTimeout = opts.requestTimeout;\n    // SSL options for Node.js client\n    this.pfx = opts.pfx;\n    this.key = opts.key;\n    this.passphrase = opts.passphrase;\n    this.cert = opts.cert;\n    this.ca = opts.ca;\n    this.ciphers = opts.ciphers;\n    this.rejectUnauthorized = opts.rejectUnauthorized;\n    // other options for Node.js client\n    this.extraHeaders = opts.extraHeaders;\n    this.create();\n}\n/**\n * Mix in `Emitter`.\n */\nEmitter(Request.prototype);\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\nRequest.prototype.create = function () {\n    var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n    var xhr = this.xhr = XMLHttpRequest(opts);\n    var self = this;\n    try {\n        debug('xhr open %s: %s', this.method, this.uri);\n        xhr.open(this.method, this.uri, this.async);\n        try {\n            if (this.extraHeaders) {\n                xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                for (var i in this.extraHeaders) {\n                    if (this.extraHeaders.hasOwnProperty(i)) {\n                        xhr.setRequestHeader(i, this.extraHeaders[i]);\n                    }\n                }\n            }\n        }\n        catch (e) { }\n        if ('POST' === this.method) {\n            try {\n                if (this.isBinary) {\n                    xhr.setRequestHeader('Content-type', 'application/octet-stream');\n                }\n                else {\n                    xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                }\n            }\n            catch (e) { }\n        }\n        try {\n            xhr.setRequestHeader('Accept', '*/*');\n        }\n        catch (e) { }\n        // ie6 check\n        if ('withCredentials' in xhr) {\n            xhr.withCredentials = true;\n        }\n        if (this.requestTimeout) {\n            xhr.timeout = this.requestTimeout;\n        }\n        if (this.hasXDR()) {\n            xhr.onload = function () {\n                self.onLoad();\n            };\n            xhr.onerror = function () {\n                self.onError(xhr.responseText);\n            };\n        }\n        else {\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 2) {\n                    try {\n                        var contentType = xhr.getResponseHeader('Content-Type');\n                        if (self.supportsBinary && contentType === 'application/octet-stream') {\n                            xhr.responseType = 'arraybuffer';\n                        }\n                    }\n                    catch (e) { }\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    self.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    setTimeout(function () {\n                        self.onError(xhr.status);\n                    }, 0);\n                }\n            };\n        }\n        debug('xhr data %s', this.data);\n        xhr.send(this.data);\n    }\n    catch (e) {\n        // Need to defer since .create() is called directly fhrom the constructor\n        // and thus the 'error' event can only be only bound *after* this exception\n        // occurs.  Therefore, also, we cannot throw here at all.\n        setTimeout(function () {\n            self.onError(e);\n        }, 0);\n        return;\n    }\n    if (typeof document !== 'undefined') {\n        this.index = Request.requestsCount++;\n        Request.requests[this.index] = this;\n    }\n};\n/**\n * Called upon successful response.\n *\n * @api private\n */\nRequest.prototype.onSuccess = function () {\n    this.emit('success');\n    this.cleanup();\n};\n/**\n * Called if we have data.\n *\n * @api private\n */\nRequest.prototype.onData = function (data) {\n    this.emit('data', data);\n    this.onSuccess();\n};\n/**\n * Called upon error.\n *\n * @api private\n */\nRequest.prototype.onError = function (err) {\n    this.emit('error', err);\n    this.cleanup(true);\n};\n/**\n * Cleans up house.\n *\n * @api private\n */\nRequest.prototype.cleanup = function (fromError) {\n    if ('undefined' === typeof this.xhr || null === this.xhr) {\n        return;\n    }\n    // xmlhttprequest\n    if (this.hasXDR()) {\n        this.xhr.onload = this.xhr.onerror = empty;\n    }\n    else {\n        this.xhr.onreadystatechange = empty;\n    }\n    if (fromError) {\n        try {\n            this.xhr.abort();\n        }\n        catch (e) { }\n    }\n    if (typeof document !== 'undefined') {\n        delete Request.requests[this.index];\n    }\n    this.xhr = null;\n};\n/**\n * Called upon load.\n *\n * @api private\n */\nRequest.prototype.onLoad = function () {\n    var data;\n    try {\n        var contentType;\n        try {\n            contentType = this.xhr.getResponseHeader('Content-Type');\n        }\n        catch (e) { }\n        if (contentType === 'application/octet-stream') {\n            data = this.xhr.response || this.xhr.responseText;\n        }\n        else {\n            data = this.xhr.responseText;\n        }\n    }\n    catch (e) {\n        this.onError(e);\n    }\n    if (null != data) {\n        this.onData(data);\n    }\n};\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\nRequest.prototype.hasXDR = function () {\n    return false; //typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n/**\n * Aborts the request.\n *\n * @api public\n */\nRequest.prototype.abort = function () {\n    this.cleanup();\n};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nRequest.requestsCount = 0;\nRequest.requests = {};\nif (typeof document !== 'undefined') {\n    /*if (typeof attachEvent === 'function') {\n      attachEvent('onunload', unloadHandler);\n    } else */ if (typeof addEventListener === 'function') {\n        var terminationEvent = 'onpagehide' in self ? 'pagehide' : 'unload';\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (var i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            var obj = Request.requests[i];\n            if (typeof obj !== 'undefined') {\n                if (typeof obj.abort !== 'undefined') {\n                    obj.abort();\n                }\n            }\n        }\n    }\n}\nexport { XHR as default, Request, };\n","/**\n * Module requirements.\n */\nimport Polling from \"./polling\";\nimport inherit from '../component-inherit';\n/**\n * Cached regular expressions.\n */\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n/**\n * Global JSONP callbacks.\n */\nvar callbacks;\n/**\n * Noop.\n */\nfunction empty() { }\n/**\n * Until https://github.com/tc39/proposal-global is shipped.\n */\nfunction glob() {\n    return typeof self !== 'undefined' ? self\n        : typeof window !== 'undefined' ? window\n            : typeof global !== 'undefined' ? global : {};\n}\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\nfunction JSONPPolling(opts) {\n    Polling.call(this, opts);\n    this.query = this.query || {};\n    // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n    /*\n      if (!callbacks) {\n        // we need to consider multiple engines in the same page\n        var global = glob();\n        callbacks = global.___eio = (global.___eio || []);\n      }\n    */\n    // callback identifier\n    this.index = callbacks.length;\n    // add callback to jsonp global\n    var self = this;\n    callbacks.push(function (msg) {\n        self.onData(msg);\n    });\n    // append to query string\n    this.query.j = this.index;\n    // prevent spurious errors from being emitted when the window is unloaded\n    if (typeof addEventListener === 'function') {\n        addEventListener('beforeunload', function () {\n            if (self.script)\n                self.script.onerror = empty;\n        }, false);\n    }\n}\n/**\n * Inherits from Polling.\n */\ninherit(JSONPPolling, Polling);\n/*\n * JSONP only supports binary as base64 encoded strings\n */\nJSONPPolling.prototype.supportsBinary = false;\n/**\n * Closes the socket.\n *\n * @api private\n */\nJSONPPolling.prototype.doClose = function () {\n    if (this.script) {\n        this.script.parentNode.removeChild(this.script);\n        this.script = null;\n    }\n    if (this.form) {\n        this.form.parentNode.removeChild(this.form);\n        this.form = null;\n        this.iframe = null;\n    }\n    Polling.prototype.doClose.call(this);\n};\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\nJSONPPolling.prototype.doPoll = function () {\n    var self = this;\n    var script = document.createElement('script');\n    if (this.script) {\n        this.script.parentNode.removeChild(this.script);\n        this.script = null;\n    }\n    script.async = true;\n    script.src = this.uri();\n    script.onerror = function (e) {\n        self.onError('jsonp poll error', e);\n    };\n    var insertAt = document.getElementsByTagName('script')[0];\n    if (insertAt) {\n        insertAt.parentNode.insertBefore(script, insertAt);\n    }\n    else {\n        (document.head || document.body).appendChild(script);\n    }\n    this.script = script;\n    var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n    if (isUAgecko) {\n        setTimeout(function () {\n            var iframe = document.createElement('iframe');\n            document.body.appendChild(iframe);\n            document.body.removeChild(iframe);\n        }, 100);\n    }\n};\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\nJSONPPolling.prototype.doWrite = function (data, fn) {\n    var self = this;\n    if (!this.form) {\n        var form = document.createElement('form');\n        var area = document.createElement('textarea');\n        var id = this.iframeId = 'eio_iframe_' + this.index;\n        var iframe;\n        form.className = 'socketio';\n        form.style.position = 'absolute';\n        form.style.top = '-1000px';\n        form.style.left = '-1000px';\n        form.target = id;\n        form.method = 'POST';\n        form.setAttribute('accept-charset', 'utf-8');\n        area.name = 'd';\n        form.appendChild(area);\n        document.body.appendChild(form);\n        this.form = form;\n        this.area = area;\n    }\n    this.form.action = this.uri();\n    function complete() {\n        initIframe();\n        fn();\n    }\n    function initIframe() {\n        if (self.iframe) {\n            try {\n                self.form.removeChild(self.iframe);\n            }\n            catch (e) {\n                self.onError('jsonp polling iframe removal error', e);\n            }\n        }\n        try {\n            // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n            var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n            iframe = document.createElement(html);\n        }\n        catch (e) {\n            iframe = document.createElement('iframe');\n            iframe.name = self.iframeId;\n            iframe.src = 'javascript:0';\n        }\n        iframe.id = self.iframeId;\n        self.form.appendChild(iframe);\n        self.iframe = iframe;\n    }\n    initIframe();\n    // escape \\n to prevent it from being converted into \\r\\n by some UAs\n    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n    data = data.replace(rEscapedNewline, '\\\\\\n');\n    this.area.value = data.replace(rNewline, '\\\\n');\n    try {\n        this.form.submit();\n    }\n    catch (e) { }\n    if (this.iframe.attachEvent) {\n        this.iframe.onreadystatechange = function () {\n            if (self.iframe.readyState === 'complete') {\n                complete();\n            }\n        };\n    }\n    else {\n        this.iframe.onload = complete;\n    }\n};\nexport { JSONPPolling, };\n","/**\n * Module dependencies.\n */\nimport { Transport } from \"../transport\";\nimport { encodePacket, encodePayload, decodePacket, decodePayload } from \".,/../engine.io-parser\";\nconst parser = { encodePacket, encodePayload, decodePacket, decodePayload };\nimport parseqs from \"parseqs\";\nimport inherit from '../component-inherit';\nimport yeast from \"yeast\";\nimport debugModule from 'debug';\nvar debug = debugModule(\"engine.io-client:websocket\");\nvar BrowserWebSocket, NodeWebSocket;\nif (typeof WebSocket !== 'undefined') {\n    BrowserWebSocket = WebSocket;\n}\nelse if (typeof self !== 'undefined') {\n    BrowserWebSocket = self.WebSocket; // || self.MozWebSocket;\n}\nelse {\n    try {\n        NodeWebSocket = require('ws');\n    }\n    catch (e) { }\n}\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\nfunction WS(opts) {\n    var forceBase64 = (opts && opts.forceBase64);\n    if (forceBase64) {\n        this.supportsBinary = false;\n    }\n    this.perMessageDeflate = opts.perMessageDeflate;\n    this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n    this.protocols = opts.protocols;\n    if (!this.usingBrowserWebSocket) {\n        WebSocketImpl = NodeWebSocket;\n    }\n    Transport.call(this, opts);\n}\n/**\n * Inherits from Transport.\n */\ninherit(WS, Transport);\n/**\n * Transport name.\n *\n * @api public\n */\nWS.prototype.name = 'websocket';\n/*\n * WebSockets support binary\n */\nWS.prototype.supportsBinary = true;\n/**\n * Opens socket.\n *\n * @api private\n */\nWS.prototype.doOpen = function () {\n    if (!this.check()) {\n        // let probe timeout\n        return;\n    }\n    var uri = this.uri();\n    var protocols = this.protocols;\n    var opts = {\n        agent: this.agent,\n        perMessageDeflate: this.perMessageDeflate\n    };\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n    if (this.extraHeaders) {\n        opts.headers = this.extraHeaders;\n    }\n    if (this.localAddress) {\n        opts.localAddress = this.localAddress;\n    }\n    try {\n        this.ws =\n            this.usingBrowserWebSocket && !this.isReactNative\n                ? protocols\n                    ? new WebSocketImpl(uri, protocols)\n                    : new WebSocketImpl(uri)\n                : new WebSocketImpl(uri, protocols, opts);\n    }\n    catch (err) {\n        return this.emit('error', err);\n    }\n    if (this.ws.binaryType === undefined) {\n        this.supportsBinary = false;\n    }\n    if (this.ws.supports && this.ws.supports.binary) {\n        this.supportsBinary = true;\n        this.ws.binaryType = 'nodebuffer';\n    }\n    else {\n        this.ws.binaryType = 'arraybuffer';\n    }\n    this.addEventListeners();\n};\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\nWS.prototype.addEventListeners = function () {\n    var self = this;\n    this.ws.onopen = function () {\n        self.onOpen();\n    };\n    this.ws.onclose = function () {\n        self.onClose();\n    };\n    this.ws.onmessage = function (ev) {\n        self.onData(ev.data);\n    };\n    this.ws.onerror = function (e) {\n        self.onError('websocket error', e);\n    };\n};\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\nWS.prototype.write = function (packets) {\n    var self = this;\n    this.writable = false;\n    // encodePacket efficient as it uses WS framing\n    // no need for encodePayload\n    var total = packets.length;\n    for (var i = 0, l = total; i < l; i++) {\n        (function (packet) {\n            parser.encodePacket(packet, self.supportsBinary, function (data) {\n                if (!self.usingBrowserWebSocket) {\n                    // always create a new object (GH-437)\n                    var opts = {};\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (self.perMessageDeflate) {\n                        var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < self.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (self.usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        self.ws.send(data);\n                    }\n                    else {\n                        self.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                    debug('websocket closed before onclose event');\n                }\n                --total || done();\n            });\n        })(packets[i]);\n    }\n    function done() {\n        self.emit('flush');\n        // fake drain\n        // defer to next tick to allow Socket to clear writeBuffer\n        setTimeout(function () {\n            self.writable = true;\n            self.emit('drain');\n        }, 0);\n    }\n};\n/**\n * Called upon close\n *\n * @api private\n */\nWS.prototype.onClose = function () {\n    Transport.prototype.onClose.call(this);\n};\n/**\n * Closes socket.\n *\n * @api private\n */\nWS.prototype.doClose = function () {\n    if (typeof this.ws !== 'undefined') {\n        this.ws.close();\n    }\n};\n/**\n * Generates uri for connection.\n *\n * @api private\n */\nWS.prototype.uri = function () {\n    var query = this.query || {};\n    var schema = this.secure ? 'wss' : 'ws';\n    var port = '';\n    var path = (typeof this.path === 'function') ? this.path() : this.path;\n    // avoid port if default for schema\n    if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n        ('ws' === schema && Number(this.port) !== 80))) {\n        port = ':' + this.port;\n    }\n    // append timestamp to URI\n    if (this.timestampRequests) {\n        query[this.timestampParam] = yeast();\n    }\n    // communicate binary support capabilities\n    if (!this.supportsBinary) {\n        query.b64 = 1;\n    }\n    query = parseqs.encode(query);\n    // prepend ? to query\n    if (query.length) {\n        query = '?' + query;\n    }\n    var ipv6 = this.hostname.indexOf(':') !== -1;\n    return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + path + query;\n};\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\nWS.prototype.check = function () {\n    return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\nexport { WS, };\n","/**\n * Module dependencies\n */\n//import XMLHttpRequest from \"xmlhttprequest-ssl\";\nimport XMLHttpRequest from \"../xmlhttprequest\";\nimport XHR from \"./polling-xhr\";\nimport { JSONPPolling as JSONP } from \"./polling-jsonp\";\nimport { WS as websocket } from \"./websocket\";\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\nfunction polling(opts) {\n    var xhr;\n    var xd = false;\n    var xs = false;\n    var jsonp = false !== opts.jsonp;\n    if (typeof location !== 'undefined') {\n        var isSSL = 'https:' === location.protocol;\n        var port = parseInt(location.port);\n        // some user agents have empty `location.port`\n        if (!port) {\n            port = isSSL ? 443 : 80;\n        }\n        xd = opts.hostname !== location.hostname || port !== opts.port;\n        xs = opts.secure !== isSSL;\n    }\n    opts.xdomain = xd;\n    opts.xscheme = xs;\n    xhr = XMLHttpRequest(opts);\n    if ('open' in xhr && !opts.forceJSONP) {\n        return new XHR(opts);\n    }\n    else {\n        if (!jsonp)\n            throw new Error('JSONP disabled');\n        return new JSONP(opts);\n    }\n}\nexport default {\n    polling,\n    websocket,\n};\n","/**\n * Module dependencies.\n */\nimport transports from \"./transports/index.js\";\nimport Emitter from \"./component-emitter\";\nimport debugModule from 'debug';\nvar debug = debugModule(\"engine.io-client:socket\");\nimport parser from \"./engine.io-parser\";\nimport parseuri from \"parseuri\";\nimport parseqs from \"parseqs\";\nimport { Transport } from \"./transport\";\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\nfunction Socket(uri, opts) {\n    //  if (!(this instanceof Socket)) return new Socket(uri, opts);\n    opts = opts || {};\n    this.outOfBand = opts.outOfBand || function () { };\n    if (uri && 'object' === typeof uri) {\n        opts = uri;\n        uri = null;\n    }\n    if (uri) {\n        uri = parseuri(uri);\n        opts.hostname = uri.host;\n        opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n        opts.port = uri.port;\n        if (uri.query)\n            opts.query = uri.query;\n    }\n    else if (opts.host) {\n        opts.hostname = parseuri(opts.host).host;\n    }\n    this.secure = null != opts.secure ? opts.secure\n        : (typeof location !== 'undefined' && 'https:' === location.protocol);\n    if (opts.hostname && !opts.port) {\n        // if no port is specified manually, use the protocol default\n        opts.port = this.secure ? '443' : '80';\n    }\n    this.agent = opts.agent || false;\n    this.hostname = opts.hostname ||\n        (typeof location !== 'undefined' ? location.hostname : 'localhost');\n    this.port = opts.port || (typeof location !== 'undefined' && location.port\n        ? location.port\n        : (this.secure ? 443 : 80));\n    this.query = opts.query || {};\n    if ('string' === typeof this.query)\n        this.query = parseqs.decode(this.query);\n    this.upgrade = false !== opts.upgrade;\n    this.path = (opts.path || '/engine.io');\n    if ('string' === typeof this.path)\n        this.path = this.path.replace(/\\/$/, '') + '/';\n    this.forceJSONP = !!opts.forceJSONP;\n    this.jsonp = false !== opts.jsonp;\n    this.forceBase64 = !!opts.forceBase64;\n    this.enablesXDR = !!opts.enablesXDR;\n    this.timestampParam = opts.timestampParam || 't';\n    this.timestampRequests = opts.timestampRequests;\n    this.transports = opts.transports || ['polling', 'websocket'];\n    this.transportOptions = opts.transportOptions || {};\n    this.readyState = '';\n    this.writeBuffer = [];\n    this.prevBufferLen = 0;\n    this.policyPort = opts.policyPort || 843;\n    this.rememberUpgrade = opts.rememberUpgrade || false;\n    this.binaryType = null;\n    this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n    this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n    if (true === this.perMessageDeflate)\n        this.perMessageDeflate = {};\n    if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n        this.perMessageDeflate.threshold = 1024;\n    }\n    // SSL options for Node.js client\n    this.pfx = opts.pfx || null;\n    this.key = opts.key || null;\n    this.passphrase = opts.passphrase || null;\n    this.cert = opts.cert || null;\n    this.ca = opts.ca || null;\n    this.ciphers = opts.ciphers || null;\n    this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n    this.forceNode = !!opts.forceNode;\n    // detect ReactNative environment\n    this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n    // other options for Node.js or ReactNative client\n    if (typeof self === 'undefined' || this.isReactNative) {\n        if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n            this.extraHeaders = opts.extraHeaders;\n        }\n        if (opts.localAddress) {\n            this.localAddress = opts.localAddress;\n        }\n    }\n    // set on handshake\n    this.id = null;\n    this.upgrades = null;\n    this.pingInterval = null;\n    this.pingTimeout = null;\n    // set on heartbeat\n    this.pingIntervalTimer = null;\n    this.pingTimeoutTimer = null;\n    this.open();\n}\nSocket.priorWebsocketSuccess = false;\n/**\n * Mix in `Emitter`.\n */\nEmitter(Socket.prototype);\n/**\n * Protocol version.\n *\n * @api public\n */\nSocket.protocol = parser.protocol; // this is an int\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\nSocket.Socket = Socket;\nSocket.Transport = Transport;\nSocket.transports = transports;\nSocket.parser = parser;\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\nSocket.prototype.createTransport = function (name) {\n    var query = clone(this.query);\n    // append engine.io protocol identifier\n    query.EIO = parser.protocol;\n    // transport name\n    query.transport = name;\n    // per-transport options\n    var options = this.transportOptions[name] || {};\n    // session id if we already have one\n    if (this.id)\n        query.sid = this.id;\n    var transport = new transports[name]({\n        query: query,\n        socket: this,\n        agent: options.agent || this.agent,\n        hostname: options.hostname || this.hostname,\n        port: options.port || this.port,\n        secure: options.secure || this.secure,\n        path: options.path || this.path,\n        forceJSONP: options.forceJSONP || this.forceJSONP,\n        jsonp: options.jsonp || this.jsonp,\n        forceBase64: options.forceBase64 || this.forceBase64,\n        enablesXDR: options.enablesXDR || this.enablesXDR,\n        timestampRequests: options.timestampRequests || this.timestampRequests,\n        timestampParam: options.timestampParam || this.timestampParam,\n        policyPort: options.policyPort || this.policyPort,\n        pfx: options.pfx || this.pfx,\n        key: options.key || this.key,\n        passphrase: options.passphrase || this.passphrase,\n        cert: options.cert || this.cert,\n        ca: options.ca || this.ca,\n        ciphers: options.ciphers || this.ciphers,\n        rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n        perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n        extraHeaders: options.extraHeaders || this.extraHeaders,\n        forceNode: options.forceNode || this.forceNode,\n        localAddress: options.localAddress || this.localAddress,\n        requestTimeout: options.requestTimeout || this.requestTimeout,\n        protocols: options.protocols || void (0),\n        isReactNative: this.isReactNative\n    });\n    return transport;\n};\nfunction clone(obj) {\n    var o = {};\n    for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            o[i] = obj[i];\n        }\n    }\n    return o;\n}\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n    var transport;\n    if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n        transport = 'websocket';\n    }\n    else if (0 === this.transports.length) {\n        // Emit error on next tick so it can be listened to\n        var self = this;\n        setTimeout(function () {\n            self.emit('error', 'No transports available');\n        }, 0);\n        return;\n    }\n    else {\n        transport = this.transports[0];\n    }\n    this.readyState = 'opening';\n    // Retry with the next transport if the transport is disabled (jsonp: false)\n    try {\n        transport = this.createTransport(transport);\n    }\n    catch (e) {\n        this.transports.shift();\n        this.open();\n        return;\n    }\n    transport.open();\n    this.setTransport(transport);\n};\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\nSocket.prototype.setTransport = function (transport) {\n    var self = this;\n    if (this.transport) {\n        this.transport.removeAllListeners();\n    }\n    // set up transport\n    this.transport = transport;\n    // set up transport listeners\n    transport\n        .on('outOfBand', function (data) {\n        self.onOutOfBand(data);\n    })\n        .on('drain', function () {\n        self.onDrain();\n    })\n        .on('packet', function (packet) {\n        self.onPacket(packet);\n    })\n        .on('error', function (e) {\n        self.onError(e);\n    })\n        .on('close', function () {\n        self.onClose('transport close');\n    });\n};\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\nSocket.prototype.probe = function (name) {\n    var transport = this.createTransport(name, { probe: 1 });\n    var failed = false;\n    var self = this;\n    Socket.priorWebsocketSuccess = false;\n    function onTransportOpen() {\n        if (self.onlyBinaryUpgrades) {\n            var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n            failed = failed || upgradeLosesBinary;\n        }\n        if (failed)\n            return;\n        transport.send([{ type: 'ping', data: 'probe' }]);\n        transport.once('packet', function (msg) {\n            if (failed)\n                return;\n            if ('pong' === msg.type && 'probe' === msg.data) {\n                self.upgrading = true;\n                self.emit('upgrading', transport);\n                if (!transport)\n                    return;\n                Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n                self.transport.pause(function () {\n                    if (failed)\n                        return;\n                    if ('closed' === self.readyState)\n                        return;\n                    cleanup();\n                    self.setTransport(transport);\n                    transport.send([{ type: 'upgrade' }]);\n                    self.emit('upgrade', transport);\n                    transport = null;\n                    self.upgrading = false;\n                    self.flush();\n                });\n            }\n            else {\n                var err = new Error('probe error');\n                err.transport = transport.name;\n                self.emit('upgradeError', err);\n            }\n        });\n    }\n    function freezeTransport() {\n        if (failed)\n            return;\n        // Any callback called by transport should be ignored since now\n        failed = true;\n        cleanup();\n        transport.close();\n        transport = null;\n    }\n    // Handle any error that happens while probing\n    function onerror(err) {\n        var error = new Error('probe error: ' + err);\n        error.transport = transport.name;\n        freezeTransport();\n        self.emit('upgradeError', error);\n    }\n    function onTransportClose() {\n        onerror('transport closed');\n    }\n    // When the socket is closed while we're probing\n    function onclose() {\n        onerror('socket closed');\n    }\n    // When the socket is upgraded while we're probing\n    function onupgrade(to) {\n        if (transport && to.name !== transport.name) {\n            freezeTransport();\n        }\n    }\n    // Remove all listeners on the transport and on self\n    function cleanup() {\n        transport.removeListener('open', onTransportOpen);\n        transport.removeListener('error', onerror);\n        transport.removeListener('close', onTransportClose);\n        self.removeListener('close', onclose);\n        self.removeListener('upgrading', onupgrade);\n    }\n    transport.once('open', onTransportOpen);\n    transport.once('error', onerror);\n    transport.once('close', onTransportClose);\n    this.once('close', onclose);\n    this.once('upgrading', onupgrade);\n    transport.open();\n};\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\nSocket.prototype.onOpen = function () {\n    this.readyState = 'open';\n    Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n    this.emit('open');\n    this.flush();\n    // we check for `readyState` in case an `open`\n    // listener already closed the socket\n    if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n        for (var i = 0, l = this.upgrades.length; i < l; i++) {\n            this.probe(this.upgrades[i]);\n        }\n    }\n};\n/**\n * Handles a packet.\n *\n * @api private\n */\nSocket.prototype.onPacket = function (packet) {\n    if ('opening' === this.readyState || 'open' === this.readyState ||\n        'closing' === this.readyState) {\n        this.emit('packet', packet);\n        // Socket is live - any packet counts\n        this.emit('heartbeat');\n        switch (packet.type) {\n            case 'open':\n                this.onHandshake(JSON.parse(packet.data));\n                break;\n            case 'pong':\n                this.setPing();\n                this.emit('pong');\n                break;\n            case 'error':\n                var err = new Error('server error');\n                err.code = packet.data;\n                this.onError(err);\n                break;\n            case 'message':\n                this.emit('data', packet.data);\n                this.emit('message', packet.data);\n                break;\n        }\n    }\n    else {\n    }\n};\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\nSocket.prototype.onHandshake = function (data) {\n    this.emit('handshake', data);\n    this.id = data.sid;\n    this.transport.query.sid = data.sid;\n    this.upgrades = this.filterUpgrades(data.upgrades);\n    this.pingInterval = data.pingInterval;\n    this.pingTimeout = data.pingTimeout;\n    this.onOpen();\n    // In case open handler closes socket\n    if ('closed' === this.readyState)\n        return;\n    this.setPing();\n    // Prolong liveness of socket on heartbeat\n    this.removeListener('heartbeat', this.onHeartbeat);\n    this.on('heartbeat', this.onHeartbeat);\n};\n/**\n * Resets ping timeout.\n *\n * @api private\n */\nSocket.prototype.onHeartbeat = function (timeout) {\n    clearTimeout(this.pingTimeoutTimer);\n    var self = this;\n    self.pingTimeoutTimer = setTimeout(function () {\n        if ('closed' === self.readyState)\n            return;\n        self.onClose('ping timeout');\n    }, timeout || (self.pingInterval + self.pingTimeout));\n};\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\nSocket.prototype.setPing = function () {\n    var self = this;\n    clearTimeout(self.pingIntervalTimer);\n    self.pingIntervalTimer = setTimeout(function () {\n        self.ping();\n        self.onHeartbeat(self.pingTimeout);\n    }, self.pingInterval);\n};\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\nSocket.prototype.ping = function () {\n    var self = this;\n    this.sendPacket('ping', function () {\n        self.emit('ping');\n    });\n};\n/**\n * Called on `outOfBand` event\n *\n * @api private\n */\nSocket.prototype.onOutOfBand = function (data) {\n    this.outOfBand(data);\n};\n/**\n * Called on `drain` event\n *\n * @api private\n */\nSocket.prototype.onDrain = function () {\n    this.writeBuffer.splice(0, this.prevBufferLen);\n    // setting prevBufferLen = 0 is very important\n    // for example, when upgrading, upgrade packet is sent over,\n    // and a nonzero prevBufferLen could cause problems on `drain`\n    this.prevBufferLen = 0;\n    if (0 === this.writeBuffer.length) {\n        this.emit('drain');\n    }\n    else {\n        this.flush();\n    }\n};\n/**\n * Flush write buffers.\n *\n * @api private\n */\nSocket.prototype.flush = function () {\n    if ('closed' !== this.readyState && this.transport.writable &&\n        !this.upgrading && this.writeBuffer.length) {\n        this.transport.send(this.writeBuffer);\n        // keep track of current length of writeBuffer\n        // splice writeBuffer and callbackBuffer on `drain`\n        this.prevBufferLen = this.writeBuffer.length;\n        this.emit('flush');\n    }\n};\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\nSocket.prototype.write =\n    Socket.prototype.send = function (msg, options, fn) {\n        this.sendPacket('message', msg, options, fn);\n        return this;\n    };\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n    if ('function' === typeof data) {\n        fn = data;\n        data = undefined;\n    }\n    if ('function' === typeof options) {\n        fn = options;\n        options = null;\n    }\n    if ('closing' === this.readyState || 'closed' === this.readyState) {\n        return;\n    }\n    options = options || {};\n    options.compress = false !== options.compress;\n    var packet = {\n        type: type,\n        data: data,\n        options: options\n    };\n    this.emit('packetCreate', packet);\n    this.writeBuffer.push(packet);\n    if (fn)\n        this.once('flush', fn);\n    this.flush();\n};\n/**\n * Closes the connection.\n *\n * @api private\n */\nSocket.prototype.close = function () {\n    if ('opening' === this.readyState || 'open' === this.readyState) {\n        this.readyState = 'closing';\n        var self = this;\n        if (this.writeBuffer.length) {\n            this.once('drain', function () {\n                if (this.upgrading) {\n                    waitForUpgrade();\n                }\n                else {\n                    close();\n                }\n            });\n        }\n        else if (this.upgrading) {\n            waitForUpgrade();\n        }\n        else {\n            close();\n        }\n    }\n    function close() {\n        self.onClose('forced close');\n        self.transport.close();\n    }\n    function cleanupAndClose() {\n        self.removeListener('upgrade', cleanupAndClose);\n        self.removeListener('upgradeError', cleanupAndClose);\n        close();\n    }\n    function waitForUpgrade() {\n        // wait for upgrade to finish since we can't send packets while pausing a transport\n        self.once('upgrade', cleanupAndClose);\n        self.once('upgradeError', cleanupAndClose);\n    }\n    return this;\n};\n/**\n * Called upon transport error\n *\n * @api private\n */\nSocket.prototype.onError = function (err) {\n    Socket.priorWebsocketSuccess = false;\n    this.emit('error', err);\n    this.onClose('transport error', err);\n};\n/**\n * Called upon transport close.\n *\n * @api private\n */\nSocket.prototype.onClose = function (reason, desc) {\n    if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n        var self = this;\n        // clear timers\n        clearTimeout(this.pingIntervalTimer);\n        clearTimeout(this.pingTimeoutTimer);\n        // stop event from firing again for transport\n        this.transport.removeAllListeners('close');\n        // ensure transport won't stay open\n        this.transport.close();\n        // ignore further transport communication\n        this.transport.removeAllListeners();\n        // set ready state\n        this.readyState = 'closed';\n        // clear session id\n        this.id = null;\n        // emit close event\n        this.emit('close', reason, desc);\n        // clean buffers after, so users can still\n        // grab the buffers on `close` event\n        self.writeBuffer = [];\n        self.prevBufferLen = 0;\n    }\n};\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\nSocket.prototype.filterUpgrades = function (upgrades) {\n    var filteredUpgrades = [];\n    for (var i = 0, j = upgrades.length; i < j; i++) {\n        if (~this.transports.indexOf(upgrades[i]))\n            filteredUpgrades.push(upgrades[i]);\n    }\n    return filteredUpgrades;\n};\nexport { Socket, };\n","import { Socket } from './socket';\n/**\n * Exports parser\n *\n * @api public\n *\n */\nimport parser from './engine.io-parser';\nexport default {\n    protocol: parser.protocol,\n    Socket,\n    parser,\n};\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nimport { installTimerFunctions } from \"./util.js\";\nexport { installTimerFunctions };\nconst v4 = {\n    Socket,\n    protocol,\n    installTimerFunctions,\n};\nimport v3 from './v3/index.js';\nconst versions = [\n    v4,\n    v3,\n];\nfunction getVersion(v) {\n    return versions.find(el => el.protocol === v);\n}\nexport { v3, v4, versions, getVersion, };\n","//import { parse } from \"engine.io-client\";\nimport parseuri from \"parseuri\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        //obj = parse(uri) as ParsedUrl;\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        // the timeout flag is optional\n        const withErr = this.flags.timeout !== undefined || this._opts.ackTimeout !== undefined;\n        return new Promise((resolve, reject) => {\n            args.push((arg1, arg2) => {\n                if (withErr) {\n                    return arg1 ? reject(arg1) : resolve(arg2);\n                }\n                else {\n                    return resolve(arg1);\n                }\n            });\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this.ids++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @private\n     */\n    _drainQueue() {\n        if (this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        const currentId = this.ids;\n        this.ids = packet.id; // the same id is reused for consecutive retries, in order to allow deduplication on the server side\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n        this.ids = currentId; // restore offset\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions,\n// nextTick,\n } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on(socket, \"error\", (err) => {\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        //nextTick(() => {\n        this.emitReserved(\"packet\", packet);\n        //}, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        if (this._autoConnect) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","/**\n * Module dependencies.\n */\nimport parseuri from 'parseuri';\nimport debugModule from 'debug';\nvar debug = debugModule('socket.io-client:url');\n/**\n * Module exports.\n */\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\nfunction url(uri, loc) {\n    var obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== 'undefined' && location);\n    if (null == uri)\n        uri = loc.protocol + '//' + loc.host;\n    // relative path support\n    if ('string' === typeof uri) {\n        if ('/' === uri.charAt(0)) {\n            if ('/' === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug('protocol-less url %s', uri);\n            if ('undefined' !== typeof loc) {\n                uri = loc.protocol + '//' + uri;\n            }\n            else {\n                uri = 'https://' + uri;\n            }\n        }\n        // parse\n        debug('parse %s', uri);\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = '80';\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = '443';\n        }\n    }\n    obj.path = obj.path || '/';\n    var ipv6 = obj.host.indexOf(':') !== -1;\n    var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n    // define unique id\n    obj.id = obj.protocol + '://' + host + ':' + obj.port;\n    // define href\n    obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n    return obj;\n}\nexport { url as default, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\nfunction Emitter(obj) {\n    if (obj)\n        return mixin(obj);\n}\n;\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\nfunction mixin(obj) {\n    for (var key in Emitter.prototype) {\n        obj[key] = Emitter.prototype[key];\n    }\n    return obj;\n}\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.on =\n    Emitter.prototype.addEventListener = function (event, fn) {\n        this._callbacks = this._callbacks || {};\n        (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n            .push(fn);\n        return this;\n    };\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.once = function (event, fn) {\n    function on() {\n        this.off(event, on);\n        fn.apply(this, arguments);\n    }\n    on.fn = fn;\n    this.on(event, on);\n    return this;\n};\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\nEmitter.prototype.off =\n    Emitter.prototype.removeListener =\n        Emitter.prototype.removeAllListeners =\n            Emitter.prototype.removeEventListener = function (event, fn) {\n                this._callbacks = this._callbacks || {};\n                // all\n                if (0 == arguments.length) {\n                    this._callbacks = {};\n                    return this;\n                }\n                // specific event\n                var callbacks = this._callbacks['$' + event];\n                if (!callbacks)\n                    return this;\n                // remove all handlers\n                if (1 == arguments.length) {\n                    delete this._callbacks['$' + event];\n                    return this;\n                }\n                // remove specific handler\n                var cb;\n                for (var i = 0; i < callbacks.length; i++) {\n                    cb = callbacks[i];\n                    if (cb === fn || cb.fn === fn) {\n                        callbacks.splice(i, 1);\n                        break;\n                    }\n                }\n                // Remove event specific arrays for event types that no\n                // one is subscribed for to avoid memory leak.\n                if (callbacks.length === 0) {\n                    delete this._callbacks['$' + event];\n                }\n                return this;\n            };\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\nEmitter.prototype.emit = function (event) {\n    this._callbacks = this._callbacks || {};\n    var args = new Array(arguments.length - 1), callbacks = this._callbacks['$' + event];\n    for (var i = 1; i < arguments.length; i++) {\n        args[i - 1] = arguments[i];\n    }\n    if (callbacks) {\n        callbacks = callbacks.slice(0);\n        for (var i = 0, len = callbacks.length; i < len; ++i) {\n            callbacks[i].apply(this, args);\n        }\n    }\n    return this;\n};\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\nEmitter.prototype.listeners = function (event) {\n    this._callbacks = this._callbacks || {};\n    return this._callbacks['$' + event] || [];\n};\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\nEmitter.prototype.hasListeners = function (event) {\n    return !!this.listeners(event).length;\n};\n/**\n * Wrap the prototype-based class with a TypeScript class.\n */\nclass TypeScriptEmitter {\n    constructor(obj = null) {\n        this.emitter = Emitter(obj || this);\n    }\n    on(event, fn) {\n        return this.emitter.on(event, fn);\n    }\n    once(event, fn) {\n        return this.emitter.once(event, fn);\n    }\n    removeListener(event, fn) {\n        return this.emitter.removeListener(event, fn);\n    }\n    removeAllListeners(event = undefined, fn = undefined) {\n        return this.emitter.removeAllListeners(event, fn);\n    }\n    emit(event, data = undefined, desc = undefined) {\n        if (typeof desc !== 'undefined') {\n            return this.emitter.emit(event, data, desc);\n        }\n        if (typeof data !== 'undefined') {\n            return this.emitter.emit(event, data);\n        }\n        return this.emitter.emit(event);\n    }\n}\nexport { Emitter as default, TypeScriptEmitter, mixin, };\n","var toString = {}.toString;\nexport default Array.isArray || function (arr) {\n    return toString.call(arr) == '[object Array]';\n};\n","var withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\nvar isView = function (obj) {\n    return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\nexport default function isBuf(obj) {\n    return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n        (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/*global Blob,File*/\n/**\n * Module requirements\n */\nimport isArray from '../isarray';\nimport isBuf from './is-buffer';\nvar toStringFunc = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toStringFunc.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toStringFunc.call(File) === '[object FileConstructor]');\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\nconst deconstructPacket = function (packet) {\n    var buffers = [];\n    var packetData = packet.data;\n    var pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n};\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBuf(data)) {\n        var placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (isArray(data)) {\n        var newData = new Array(data.length);\n        for (var i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === 'object' && !(data instanceof Date)) {\n        var newData2 = {};\n        for (var key in data) {\n            newData2[key] = _deconstructPacket(data[key], buffers);\n        }\n        return newData2;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\nconst reconstructPacket = function (packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n};\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (isArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === 'object') {\n        for (var key in data) {\n            data[key] = _reconstructPacket(data[key], buffers);\n        }\n    }\n    return data;\n}\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\nconst removeBlobs = function (data, callback) {\n    function _removeBlobs(obj, curKey = undefined, containingObject = undefined) {\n        if (!obj)\n            return obj;\n        // convert any blob\n        if ((withNativeBlob && obj instanceof Blob) ||\n            (withNativeFile && obj instanceof File)) {\n            pendingBlobs++;\n            // async filereader\n            var fileReader = new FileReader();\n            fileReader.onload = function () {\n                if (containingObject) {\n                    containingObject[curKey] = this.result;\n                }\n                else {\n                    bloblessData = this.result;\n                }\n                // if nothing pending its callback time\n                if (!--pendingBlobs) {\n                    callback(bloblessData);\n                }\n            };\n            fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n        }\n        else if (isArray(obj)) { // handle array\n            for (var i = 0; i < obj.length; i++) {\n                _removeBlobs(obj[i], i, obj);\n            }\n        }\n        else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n            for (var key in obj) {\n                _removeBlobs(obj[key], key, obj);\n            }\n        }\n    }\n    var pendingBlobs = 0;\n    var bloblessData = data;\n    _removeBlobs(bloblessData);\n    if (!pendingBlobs) {\n        callback(bloblessData);\n    }\n};\nexport default {\n    deconstructPacket,\n    reconstructPacket,\n    removeBlobs,\n};\n","/**\n * Module dependencies.\n */\nimport debugModule from 'debug';\nvar debug = debugModule('socket.io-parser');\nimport Emitter from '../component-emitter';\nimport binary from './binary';\nimport isArray from '../isarray';\nimport isBuf from './is-buffer';\n/**\n * Protocol version.\n *\n * @api public\n */\nconst protocol = 4;\n/**\n * Packet types.\n *\n * @api public\n */\nconst types = [\n    'CONNECT',\n    'DISCONNECT',\n    'EVENT',\n    'ACK',\n    'ERROR',\n    'BINARY_EVENT',\n    'BINARY_ACK'\n];\n/**\n * Packet type `connect`.\n *\n * @api public\n */\nconst CONNECT = 0;\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\nconst DISCONNECT = 1;\n/**\n * Packet type `event`.\n *\n * @api public\n */\nconst EVENT = 2;\n/**\n * Packet type `ack`.\n *\n * @api public\n */\nconst ACK = 3;\n/**\n * Packet type `error`.\n *\n * @api public\n */\nconst ERROR = 4;\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\nconst BINARY_EVENT = 5;\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\nconst BINARY_ACK = 6;\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\nfunction Encoder() { }\nconst ERROR_PACKET = ERROR + '\"encode error\"';\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\nEncoder.prototype.encode = function (obj, callback) {\n    debug('encoding packet %j', obj);\n    if (BINARY_EVENT === obj.type || BINARY_ACK === obj.type) {\n        encodeAsBinary(obj, callback);\n    }\n    else {\n        var encoding = encodeAsString(obj);\n        callback([encoding]);\n    }\n};\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\nfunction encodeAsString(obj) {\n    // first is type\n    var str = '' + obj.type;\n    // attachments if we have them\n    if (BINARY_EVENT === obj.type || BINARY_ACK === obj.type) {\n        str += obj.attachments + '-';\n    }\n    // if we have a namespace other than `/`\n    // we append it followed by a comma `,`\n    if (obj.nsp && '/' !== obj.nsp) {\n        str += obj.nsp + ',';\n    }\n    // immediately followed by the id\n    if (null != obj.id) {\n        str += obj.id;\n    }\n    // json data\n    if (null != obj.data) {\n        var payload = tryStringify(obj.data);\n        if (payload !== false) {\n            str += payload;\n        }\n        else {\n            return ERROR_PACKET;\n        }\n    }\n    debug('encoded %j as %s', obj, str);\n    return str;\n}\nfunction tryStringify(str) {\n    try {\n        return JSON.stringify(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\nfunction encodeAsBinary(obj, callback) {\n    function writeEncoding(bloblessData) {\n        var deconstruction = binary.deconstructPacket(bloblessData);\n        var pack = encodeAsString(deconstruction.packet);\n        var buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        callback(buffers); // write all the buffers\n    }\n    binary.removeBlobs(obj, writeEncoding);\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\nfunction Decoder() {\n    this.reconstructor = null;\n}\n/**\n * Mix in `Emitter` with Decoder.\n */\nEmitter(Decoder.prototype);\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\nDecoder.prototype.add = function (obj) {\n    var packet;\n    if (typeof obj === 'string') {\n        packet = decodeString(obj);\n        if (BINARY_EVENT === packet.type || BINARY_ACK === packet.type) { // binary packet's json\n            this.reconstructor = new BinaryReconstructor(packet);\n            // no attachments, labeled binary but no binary data to follow\n            if (this.reconstructor.reconPack.attachments === 0) {\n                this.emit('decoded', packet);\n            }\n        }\n        else { // non-binary full packet\n            this.emit('decoded', packet);\n        }\n    }\n    else if (isBuf(obj) || obj.base64) { // raw binary data\n        if (!this.reconstructor) {\n            throw new Error('got binary data when not reconstructing a packet');\n        }\n        else {\n            packet = this.reconstructor.takeBinaryData(obj);\n            if (packet) { // received final buffer\n                this.reconstructor = null;\n                this.emit('decoded', packet);\n            }\n        }\n    }\n    else {\n        throw new Error('Unknown type: ' + obj);\n    }\n};\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\nfunction decodeString(str) {\n    var i = 0;\n    // look up type\n    var p = {\n        type: Number(str.charAt(0))\n    };\n    if (null == types[p.type]) {\n        return error('unknown packet type ' + p.type);\n    }\n    // look up attachments if type binary\n    if (BINARY_EVENT === p.type || BINARY_ACK === p.type) {\n        var buf = '';\n        while (str.charAt(++i) !== '-') {\n            buf += str.charAt(i);\n            if (i == str.length)\n                break;\n        }\n        if (buf != Number(buf).toString() || str.charAt(i) !== '-') {\n            throw new Error('Illegal attachments');\n        }\n        p.attachments = Number(buf);\n    }\n    // look up namespace (if any)\n    if ('/' === str.charAt(i + 1)) {\n        p.nsp = '';\n        while (++i) {\n            var c = str.charAt(i);\n            if (',' === c)\n                break;\n            p.nsp += c;\n            if (i === str.length)\n                break;\n        }\n    }\n    else {\n        p.nsp = '/';\n    }\n    // look up id\n    var next = str.charAt(i + 1);\n    if ('' !== next && Number(next) == next) {\n        p.id = '';\n        while (++i) {\n            var c = str.charAt(i);\n            if (null == c || Number(c) != c) {\n                --i;\n                break;\n            }\n            p.id += str.charAt(i);\n            if (i === str.length)\n                break;\n        }\n        p.id = Number(p.id);\n    }\n    // look up json data\n    if (str.charAt(++i)) {\n        var payload = tryParse(str.substr(i));\n        var isPayloadValid = payload !== false && (p.type === ERROR || isArray(payload));\n        if (isPayloadValid) {\n            p.data = payload;\n        }\n        else {\n            return error('invalid payload');\n        }\n    }\n    debug('decoded %s as %j', str, p);\n    return p;\n}\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\nDecoder.prototype.destroy = function () {\n    if (this.reconstructor) {\n        this.reconstructor.finishedReconstruction();\n    }\n};\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\nfunction BinaryReconstructor(packet) {\n    this.reconPack = packet;\n    this.buffers = [];\n}\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\nBinaryReconstructor.prototype.takeBinaryData = function (binData) {\n    this.buffers.push(binData);\n    if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n        var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n        this.finishedReconstruction();\n        return packet;\n    }\n    return null;\n};\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\nBinaryReconstructor.prototype.finishedReconstruction = function () {\n    this.reconPack = null;\n    this.buffers = [];\n};\nfunction error(msg) {\n    return {\n        type: ERROR,\n        data: 'parser error: ' + msg\n    };\n}\nexport default {\n    protocol,\n    types,\n    CONNECT,\n    DISCONNECT,\n    EVENT,\n    ACK,\n    ERROR,\n    BINARY_EVENT,\n    BINARY_ACK,\n    Encoder,\n    Decoder,\n};\n","export default function toArray(list, index = 0) {\n    var array = [];\n    index = index || 0;\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i];\n    }\n    return array;\n}\n","/**\n * Module exports.\n */\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return {\n        destroy: function () {\n            obj.removeListener(ev, fn);\n        }\n    };\n}\nexport { on as default, };\n","/**\n * Slice reference.\n */\nvar slice = [].slice;\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\nexport default function (obj, fn) {\n    if ('string' == typeof fn)\n        fn = obj[fn];\n    if ('function' != typeof fn)\n        throw new Error('bind() requires a function');\n    var args = slice.call(arguments, 2);\n    return function () {\n        return fn.apply(obj, args.concat(slice.call(arguments)));\n    };\n}\n;\n","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","/* global Blob File */\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === 'function' ||\n    typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nconst withNativeFile = typeof File === 'function' ||\n    typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\nconst withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\nexport default function hasBinary(obj, b = false) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n        return true;\n    }\n    // see: https://github.com/Automattic/has-binary/pull/4\n    if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","/**\n * Module dependencies.\n */\nimport parser from './socket.io-parser';\nimport Emitter from './component-emitter';\nimport toArray from './to-array';\nimport on from './on';\nimport bind from './component-bind';\nimport debugModule from 'debug';\nvar debug = debugModule('socket.io-client:socket');\nimport parseqs from 'parseqs';\nimport hasBin from './has-binary2';\n/**\n * Module exports.\n */\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\nvar events = {\n    connect: 1,\n    connect_error: 1,\n    connect_timeout: 1,\n    connecting: 1,\n    disconnect: 1,\n    error: 1,\n    reconnect: 1,\n    reconnect_attempt: 1,\n    reconnect_failed: 1,\n    reconnect_error: 1,\n    reconnecting: 1,\n    ping: 1,\n    pong: 1\n};\n/**\n * Shortcut to `Emitter#emit`.\n */\nvar emit = Emitter.prototype.emit;\n/**\n * `Socket` constructor.\n *\n * @api public\n */\nfunction Socket(io, nsp, opts) {\n    this.io = io;\n    this.nsp = nsp;\n    this.json = this; // compat\n    this.ids = 0;\n    this.acks = {};\n    this.receiveBuffer = [];\n    this.sendBuffer = [];\n    this.connected = false;\n    this.disconnected = true;\n    this.flags = {};\n    if (opts && opts.query) {\n        this.query = opts.query;\n    }\n    if (this.io.autoConnect)\n        this.open();\n}\n/**\n * Mix in `Emitter`.\n */\nEmitter(Socket.prototype);\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\nSocket.prototype.subEvents = function () {\n    if (this.subs)\n        return;\n    var io = this.io;\n    this.subs = [\n        on(io, 'open', bind(this, 'onopen')),\n        on(io, 'packet', bind(this, 'onpacket')),\n        on(io, 'close', bind(this, 'onclose'))\n    ];\n};\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\nSocket.prototype.open =\n    Socket.prototype.connect = function () {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        this.io.open(); // ensure open\n        if ('open' === this.io.readyState)\n            this.onopen();\n        this.emit('connecting');\n        return this;\n    };\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\nSocket.prototype.send = function () {\n    var args = toArray(arguments);\n    args.unshift('message');\n    this.emit.apply(this, args);\n    return this;\n};\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\nSocket.prototype.emit = function (ev) {\n    if (events.hasOwnProperty(ev)) {\n        emit.apply(this, arguments);\n        return this;\n    }\n    var args = toArray(arguments);\n    var packet = {\n        type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n        data: args\n    };\n    packet.options = {};\n    packet.options.compress = !this.flags || false !== this.flags.compress;\n    // event ack callback\n    if ('function' === typeof args[args.length - 1]) {\n        debug('emitting packet with ack id %d', this.ids);\n        this.acks[this.ids] = args.pop();\n        packet.id = this.ids++;\n    }\n    if (this.connected) {\n        this.packet(packet);\n    }\n    else {\n        this.sendBuffer.push(packet);\n    }\n    this.flags = {};\n    return this;\n};\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\nSocket.prototype.packet = function (packet) {\n    packet.nsp = this.nsp;\n    this.io.packet(packet);\n};\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\nSocket.prototype.onopen = function () {\n    debug('transport is open - connecting');\n    // write connect packet if necessary\n    if ('/' !== this.nsp) {\n        if (this.query) {\n            var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n            debug('sending connect packet with query %s', query);\n            this.packet({ type: parser.CONNECT, query: query });\n        }\n        else {\n            this.packet({ type: parser.CONNECT });\n        }\n    }\n};\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\nSocket.prototype.onclose = function (reason) {\n    debug('close (%s)', reason);\n    this.connected = false;\n    this.disconnected = true;\n    delete this.id;\n    this.emit('disconnect', reason);\n};\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\nSocket.prototype.onpacket = function (packet) {\n    var sameNamespace = packet.nsp === this.nsp;\n    var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n    if (!sameNamespace && !rootNamespaceError)\n        return;\n    switch (packet.type) {\n        case parser.CONNECT:\n            this.onconnect();\n            break;\n        case parser.EVENT:\n            this.onevent(packet);\n            break;\n        case parser.BINARY_EVENT:\n            this.onevent(packet);\n            break;\n        case parser.ACK:\n            this.onack(packet);\n            break;\n        case parser.BINARY_ACK:\n            this.onack(packet);\n            break;\n        case parser.DISCONNECT:\n            this.ondisconnect();\n            break;\n        case parser.ERROR:\n            this.emit('error', packet.data);\n            break;\n    }\n};\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\nSocket.prototype.onevent = function (packet) {\n    var args = packet.data || [];\n    debug('emitting event %j', args);\n    if (null != packet.id) {\n        debug('attaching ack callback to event');\n        args.push(this.ack(packet.id));\n    }\n    if (this.connected) {\n        emit.apply(this, args);\n    }\n    else {\n        this.receiveBuffer.push(args);\n    }\n};\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\nSocket.prototype.ack = function (id) {\n    var self = this;\n    var sent = false;\n    return function () {\n        // prevent double callbacks\n        if (sent)\n            return;\n        sent = true;\n        var args = toArray(arguments);\n        debug('sending ack %j', args);\n        self.packet({\n            type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n            id: id,\n            data: args\n        });\n    };\n};\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\nSocket.prototype.onack = function (packet) {\n    var ack = this.acks[packet.id];\n    if ('function' === typeof ack) {\n        debug('calling ack %s with %j', packet.id, packet.data);\n        ack.apply(this, packet.data);\n        delete this.acks[packet.id];\n    }\n    else {\n        debug('bad ack %s', packet.id);\n    }\n};\n/**\n * Called upon server connect.\n *\n * @api private\n */\nSocket.prototype.onconnect = function () {\n    this.connected = true;\n    this.disconnected = false;\n    this.emit('connect');\n    this.emitBuffered();\n};\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\nSocket.prototype.emitBuffered = function () {\n    var i;\n    for (i = 0; i < this.receiveBuffer.length; i++) {\n        emit.apply(this, this.receiveBuffer[i]);\n    }\n    this.receiveBuffer = [];\n    for (i = 0; i < this.sendBuffer.length; i++) {\n        this.packet(this.sendBuffer[i]);\n    }\n    this.sendBuffer = [];\n};\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\nSocket.prototype.ondisconnect = function () {\n    debug('server disconnect (%s)', this.nsp);\n    this.destroy();\n    this.onclose('io server disconnect');\n};\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\nSocket.prototype.destroy = function () {\n    if (this.subs) {\n        // clean subscriptions to avoid reconnections\n        for (var i = 0; i < this.subs.length; i++) {\n            this.subs[i].destroy();\n        }\n        this.subs = null;\n    }\n    this.io.destroy(this);\n};\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\nSocket.prototype.close =\n    Socket.prototype.disconnect = function () {\n        if (this.connected) {\n            debug('performing disconnect (%s)', this.nsp);\n            this.packet({ type: parser.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose('io client disconnect');\n        }\n        return this;\n    };\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\nSocket.prototype.compress = function (compress) {\n    this.flags.compress = compress;\n    return this;\n};\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\nSocket.prototype.binary = function (binary) {\n    this.flags.binary = binary;\n    return this;\n};\nexport { Socket as default, };\n","var indexOf = [].indexOf;\nexport default function (arr, obj) {\n    if (indexOf)\n        return arr.indexOf(obj);\n    for (var i = 0; i < arr.length; ++i) {\n        if (arr[i] === obj)\n            return i;\n    }\n    return -1;\n}\n;\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport default function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","/**\n * Module dependencies.\n */\nimport { v3 } from 'engine.io-client';\nvar eio = v3.Socket;\nimport Socket from './socket';\nimport Emitter from './component-emitter';\nimport parser from './socket.io-parser';\nimport on from './on';\nimport bind from './component-bind';\nimport debugModule from 'debug';\nvar debug = debugModule('socket.io-client:manager');\nimport indexOf from './indexof';\nimport Backoff from './backo2';\n/**\n * IE6+ hasOwnProperty\n */\nvar has = Object.prototype.hasOwnProperty;\n/**\n * Module exports\n */\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\nfunction Manager(uri, opts) {\n    //  if (!(this instanceof Manager)) return new Manager(uri, opts);\n    if (!(this instanceof Manager))\n        console.error('socket.io-client:Is not a Manager');\n    if (uri && ('object' === typeof uri)) {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    opts.path = opts.path || '/socket.io';\n    this.nsps = {};\n    this.subs = [];\n    this.opts = opts;\n    this.reconnection(opts.reconnection !== false);\n    this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n    this.reconnectionDelay(opts.reconnectionDelay || 1000);\n    this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n    this.randomizationFactor(opts.randomizationFactor || 0.5);\n    this.backoff = new Backoff({\n        min: this.reconnectionDelay(),\n        max: this.reconnectionDelayMax(),\n        jitter: this.randomizationFactor()\n    });\n    this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n    this.readyState = 'closed';\n    this.uri = uri;\n    this.connecting = [];\n    this.lastPing = null;\n    this.encoding = false;\n    this.packetBuffer = [];\n    var _parser = opts.parser || parser;\n    this.encoder = new _parser.Encoder();\n    this.decoder = new _parser.Decoder();\n    this.autoConnect = opts.autoConnect !== false;\n    if (this.autoConnect)\n        this.open();\n}\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\nManager.prototype.emitAll = function () {\n    this.emit.apply(this, arguments);\n    for (var nsp in this.nsps) {\n        if (has.call(this.nsps, nsp)) {\n            this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n        }\n    }\n};\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\nManager.prototype.updateSocketIds = function () {\n    for (var nsp in this.nsps) {\n        if (has.call(this.nsps, nsp)) {\n            this.nsps[nsp].id = this.generateId(nsp);\n        }\n    }\n};\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\nManager.prototype.generateId = function (nsp) {\n    return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n/**\n * Mix in `Emitter`.\n */\nEmitter(Manager.prototype);\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\nManager.prototype.reconnection = function (v) {\n    if (!arguments.length)\n        return this._reconnection;\n    this._reconnection = !!v;\n    return this;\n};\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\nManager.prototype.reconnectionAttempts = function (v) {\n    if (!arguments.length)\n        return this._reconnectionAttempts;\n    this._reconnectionAttempts = v;\n    return this;\n};\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\nManager.prototype.reconnectionDelay = function (v) {\n    if (!arguments.length)\n        return this._reconnectionDelay;\n    this._reconnectionDelay = v;\n    this.backoff && this.backoff.setMin(v);\n    return this;\n};\nManager.prototype.randomizationFactor = function (v) {\n    if (!arguments.length)\n        return this._randomizationFactor;\n    this._randomizationFactor = v;\n    this.backoff && this.backoff.setJitter(v);\n    return this;\n};\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\nManager.prototype.reconnectionDelayMax = function (v) {\n    if (!arguments.length)\n        return this._reconnectionDelayMax;\n    this._reconnectionDelayMax = v;\n    this.backoff && this.backoff.setMax(v);\n    return this;\n};\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\nManager.prototype.timeout = function (v) {\n    if (!arguments.length)\n        return this._timeout;\n    this._timeout = v;\n    return this;\n};\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\nManager.prototype.maybeReconnectOnOpen = function () {\n    // Only try to reconnect if it's the first time we're connecting\n    if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n        // keeps reconnection from firing twice for the same reconnection loop\n        this.reconnect();\n    }\n};\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\nManager.prototype.open =\n    Manager.prototype.connect = function (fn, opts) {\n        debug('readyState %s', this.readyState);\n        if (~this.readyState.indexOf('open'))\n            return this;\n        debug('opening %s', this.uri);\n        this.engine = new eio(this.uri, this.opts);\n        var socket = this.engine;\n        var self = this;\n        this.readyState = 'opening';\n        this.skipReconnect = false;\n        // emit `open`\n        var openSub = on(socket, 'open', function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `connect_error`\n        var errorSub = on(socket, 'error', function (data) {\n            debug('connect_error');\n            self.cleanup();\n            self.readyState = 'closed';\n            self.emitAll('connect_error', data);\n            if (fn) {\n                var err = new Error('Connection error');\n                err.data = data;\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        // emit `connect_timeout`\n        if (false !== this._timeout) {\n            var timeout = this._timeout;\n            debug('connect attempt will timeout after %d', timeout);\n            // set timer\n            var timer = setTimeout(function () {\n                debug('connect attempt timed out after %d', timeout);\n                openSub.destroy();\n                socket.close();\n                socket.emit('error', 'timeout');\n                self.emitAll('connect_timeout', timeout);\n            }, timeout);\n            this.subs.push({\n                destroy: function () {\n                    clearTimeout(timer);\n                }\n            });\n        }\n        this.subs.push(openSub);\n        this.subs.push(errorSub);\n        return this;\n    };\n/**\n * Called upon transport open.\n *\n * @api private\n */\nManager.prototype.onopen = function () {\n    debug('open');\n    // clear old subs\n    this.cleanup();\n    // mark as open\n    this.readyState = 'open';\n    this.emit('open');\n    // add new subs\n    var socket = this.engine;\n    this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n    this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n    this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n    this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n    this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n    this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n/**\n * Called upon a ping.\n *\n * @api private\n */\nManager.prototype.onping = function () {\n    this.lastPing = new Date();\n    this.emitAll('ping');\n};\n/**\n * Called upon a packet.\n *\n * @api private\n */\nManager.prototype.onpong = function () {\n    var now = new Date();\n    this.emitAll('pong', now - this.lastPing);\n};\n/**\n * Called with data.\n *\n * @api private\n */\nManager.prototype.ondata = function (data) {\n    this.decoder.add(data);\n};\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\nManager.prototype.ondecoded = function (packet) {\n    this.emit('packet', packet);\n};\n/**\n * Called upon socket error.\n *\n * @api private\n */\nManager.prototype.onerror = function (err) {\n    debug('error', err);\n    this.emitAll('error', err);\n};\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\nManager.prototype.socket = function (nsp, opts) {\n    var socket = this.nsps[nsp];\n    if (!socket) {\n        socket = new Socket(this, nsp, opts);\n        this.nsps[nsp] = socket;\n        var self = this;\n        socket.on('connecting', onConnecting);\n        socket.on('connect', function () {\n            socket.id = self.generateId(nsp);\n        });\n        if (this.autoConnect) {\n            // manually call here since connecting event is fired before listening\n            onConnecting();\n        }\n    }\n    function onConnecting() {\n        if (!~indexOf(self.connecting, socket)) {\n            self.connecting.push(socket);\n        }\n    }\n    return socket;\n};\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\nManager.prototype.destroy = function (socket) {\n    var index = indexOf(this.connecting, socket);\n    if (~index)\n        this.connecting.splice(index, 1);\n    if (this.connecting.length)\n        return;\n    this.close();\n};\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\nManager.prototype.packet = function (packet) {\n    debug('writing packet %j', packet);\n    var self = this;\n    if (packet.query && packet.type === 0)\n        packet.nsp += '?' + packet.query;\n    if (!self.encoding) {\n        // encode, then write to engine with result\n        self.encoding = true;\n        this.encoder.encode(packet, function (encodedPackets) {\n            for (var i = 0; i < encodedPackets.length; i++) {\n                self.engine.write(encodedPackets[i], packet.options);\n            }\n            self.encoding = false;\n            self.processPacketQueue();\n        });\n    }\n    else { // add packet to the queue\n        self.packetBuffer.push(packet);\n    }\n};\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\nManager.prototype.processPacketQueue = function () {\n    if (this.packetBuffer.length > 0 && !this.encoding) {\n        var pack = this.packetBuffer.shift();\n        this.packet(pack);\n    }\n};\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\nManager.prototype.cleanup = function () {\n    debug('cleanup');\n    var subsLength = this.subs.length;\n    for (var i = 0; i < subsLength; i++) {\n        var sub = this.subs.shift();\n        sub.destroy();\n    }\n    this.packetBuffer = [];\n    this.encoding = false;\n    this.lastPing = null;\n    this.decoder.destroy();\n};\n/**\n * Close the current socket.\n *\n * @api private\n */\nManager.prototype.close =\n    Manager.prototype.disconnect = function () {\n        debug('disconnect');\n        this.skipReconnect = true;\n        this.reconnecting = false;\n        if ('opening' === this.readyState) {\n            // `onclose` will not fire because\n            // an open event never happened\n            this.cleanup();\n        }\n        this.backoff.reset();\n        this.readyState = 'closed';\n        if (this.engine)\n            this.engine.close();\n    };\n/**\n * Called upon engine close.\n *\n * @api private\n */\nManager.prototype.onclose = function (reason) {\n    debug('onclose');\n    this.cleanup();\n    this.backoff.reset();\n    this.readyState = 'closed';\n    this.emit('close', reason);\n    if (this._reconnection && !this.skipReconnect) {\n        this.reconnect();\n    }\n};\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\nManager.prototype.reconnect = function () {\n    if (this.reconnecting || this.skipReconnect)\n        return this;\n    var self = this;\n    if (this.backoff.attempts >= this._reconnectionAttempts) {\n        debug('reconnect failed');\n        this.backoff.reset();\n        this.emitAll('reconnect_failed');\n        this.reconnecting = false;\n    }\n    else {\n        var delay = this.backoff.duration();\n        debug('will wait %dms before reconnect attempt', delay);\n        this.reconnecting = true;\n        var timer = setTimeout(function () {\n            if (self.skipReconnect)\n                return;\n            debug('attempting reconnect');\n            self.emitAll('reconnect_attempt', self.backoff.attempts);\n            self.emitAll('reconnecting', self.backoff.attempts);\n            // check again for the case socket closed in above events\n            if (self.skipReconnect)\n                return;\n            self.open(function (err) {\n                if (err) {\n                    debug('reconnect attempt error');\n                    self.reconnecting = false;\n                    self.reconnect();\n                    self.emitAll('reconnect_error', err.data);\n                }\n                else {\n                    debug('reconnect success');\n                    self.onreconnect();\n                }\n            });\n        }, delay);\n        this.subs.push({\n            destroy: function () {\n                clearTimeout(timer);\n            }\n        });\n    }\n};\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\nManager.prototype.onreconnect = function () {\n    var attempt = this.backoff.attempts;\n    this.reconnecting = false;\n    this.backoff.reset();\n    this.updateSocketIds();\n    this.emitAll('reconnect', attempt);\n};\nexport { Manager as default, };\n","/**\n * Module dependencies.\n */\nimport url from './url';\nimport parser from './socket.io-parser';\nimport Manager from './manager';\nimport debugModule from 'debug';\nvar debug = debugModule('socket.io-client');\n/**\n * Module exports.\n */\n/**\n * Managers cache.\n */\nvar cache = {};\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\nfunction lookup(uri, opts) {\n    if (typeof uri === 'object') {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    var parsed = url(uri, null);\n    var source = parsed.source;\n    var id = parsed.id;\n    var path = parsed.path;\n    var sameNamespace = cache[id] && path in cache[id].nsps;\n    var newConnection = opts.forceNew || opts['force new connection'] ||\n        false === opts.multiplex || sameNamespace;\n    var io;\n    if (newConnection) {\n        debug('ignoring socket cache for %s', source);\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug('new io instance for %s', source);\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.query;\n    }\n    return io.socket(parsed.path, opts);\n}\n/**\n * Protocol version.\n *\n * @api public\n */\nvar protocol = parser.protocol;\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\nconst connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\nimport { v3 as eio } from 'engine.io-client';\nimport Socket from './socket';\nconst v4 = {\n    eio,\n    name: 'socket.io-client',\n    managers: cache,\n    protocol,\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n    default: lookup,\n};\nexport { v4 };\n","import { v4 as eio } from 'engine.io-client';\nimport { protocol, Manager, Socket, io } from \"./index.js\";\nimport { v4 } from \"./v3/index.js\";\n/**\n These versions are super confusing and obnoxious.\n socket.io-client protocol 5 uses engine.io protocol 4\n socket.io-client protocol 4 uses engine.io protocol 3\n Internally, just call it by the engine.io version\n On export, rename v4 to v5 and v3 to v4\n */\nconst v5 = {\n    eio,\n    protocol,\n    Manager,\n    Socket,\n    io,\n    connect: io,\n};\nconst versions = [\n    v5,\n    v4,\n];\nfunction getEioProtocolVersion(v) {\n    return versions.find(el => el.eio.protocol === v);\n}\nexport { v5, v4, versions, getEioProtocolVersion, };\n"],"names":["hasCorsModule","XMLHttpRequest","err","self","window","Function","opts","xdomain","hasCORS","e","globalThis","concat","join","pick","obj","attr","reduce","acc","k","hasOwnProperty","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","useNativeTimers","setTimeoutFn","bind","clearTimeoutFn","BASE64_OVERHEAD","byteLength","utf8Length","Math","ceil","size","str","c","length","i","l","charCodeAt","Emitter","mixin","key","prototype","on","addEventListener","event","fn","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","args","Array","slice","len","emitReserved","listeners","hasListeners","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","type","data","withNativeBlob","Blob","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","lookup","decode","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","packetType","decoded","base64","SEPARATOR","String","fromCharCode","encodePayload","packets","encodedPackets","count","packet","decodePayload","encodedPayload","decodedPacket","protocol","Transport","writable","query","readyState","socket","msg","desc","Error","description","doOpen","doClose","onClose","write","onPacket","alphabet","map","seed","prev","encode","num","encoded","floor","yeast","now","Date","yeast_1","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","Polling","polling","poll","onPause","pause","total","doPoll","onOpen","close","doWrite","schema","secure","port","timestampRequests","timestampParam","sid","b64","Number","encodedQuery","parseqs","ipv6","hostname","indexOf","path","empty","hasXHR2","xhr","responseType","XHR","location","isSSL","xd","xs","forceBase64","Request","uri","req","request","method","onError","onData","pollXhr","async","undefined","xscheme","open","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","onreadystatechange","status","onLoad","send","document","index","requestsCount","requests","cleanup","onSuccess","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","nextTick","isPromiseAvailable","Promise","resolve","then","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","navigator","product","toLowerCase","WS","check","protocols","headers","ws","addEventListeners","onopen","autoUnref","_socket","unref","onclose","onmessage","ev","onerror","lastPacket","name","transports","websocket","re","parts","parseuri","src","b","replace","m","exec","source","host","authority","ipv6uri","pathNames","queryKey","regx","names","substr","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","closeOnBeforeunload","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","offlineEventListener","clone","EIO","priorWebsocketSuccess","createTransport","shift","setTransport","onDrain","failed","onTransportOpen","upgrading","flush","freezeTransport","error","onTransportClose","onupgrade","to","probe","onHandshake","JSON","parse","resetPingTimeout","sendPacket","code","filterUpgrades","maxPayload","getWritablePackets","shouldCheckPayloadSize","payloadSize","options","compress","cleanupAndClose","waitForUpgrade","reason","filteredUpgrades","j","o","enablesXDR","stringFromCharCode","ucs2decode","string","output","counter","value","extra","ucs2encode","array","checkScalarValue","codePoint","strict","toUpperCase","createByte","encodeCodePoint","symbol","utf8encode","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","utf8decode","tmp","version","withNativeFile","File","hasBinary","isArray","toJSON","after","err_cb","noop","bail","proxy","arr","has","Buffer","encoding","v","Uint8Array","a","ping","pong","message","packetslist","isBuffer","encodeBuffer","arrayBufferToBuffer","utf8","encodeBase64Packet","typeBuffer","tryDecode","intArray","abv","encodePayloadAsBinary","encodeOne","doneCallback","setLengthHeader","results","ary","each","done","next","decodePayloadAsBinary","n","chr","more","bufferToString","stringToBuffer","buf","writeUInt8","offset","byteOffset","encodeOneBinaryPacket","p","onBinaryPacketEncode","encodingLength","sizeBuffer","parseInt","bufferTail","buffers","strLen","isString","msgLength","pfx","passphrase","cert","ca","ciphers","forceNode","localAddress","parser","outOfBand","constructor","s","h","d","w","y","ms","val","isFinite","fmtLong","fmtShort","stringify","match","parseFloat","msAbs","abs","round","plural","isPlural","setup","env","createDebug","debug","coerce","disable","enable","enabled","humanize","require$$0","destroy","skips","formatters","selectColor","namespace","hash","colors","prevTime","enableOverride","namespacesCache","enabledCache","curr","diff","unshift","format","formatter","formatArgs","logFn","log","useColors","color","extend","defineProperty","enumerable","configurable","get","namespaces","set","init","delimiter","newDebug","save","RegExp","toNamespace","test","regexp","stack","console","warn","load","common","exports","localstorage","warned","process","__nwjs","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","module","lastC","storage","setItem","removeItem","r","getItem","DEBUG","localStorage","debugModule","inherit","cleanData","matchPos","startsWith","pos","start","end","del","heur","callbackfn","isBinary","sendXhr","hasXDR","contentType","getResponseHeader","response","rNewline","rEscapedNewline","JSONPPolling","script","parentNode","removeChild","form","iframe","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","area","iframeId","className","position","top","left","target","setAttribute","action","complete","initIframe","html","submit","BrowserWebSocket","NodeWebSocket","require","WebSocketImpl","supports","binary","jsonp","forceJSONP","JSONP","policyPort","onlyBinaryUpgrades","pingIntervalTimer","onOutOfBand","upgradeLosesBinary","setPing","onHeartbeat","v4","url","loc","href","deconstructPacket","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","PacketType","Encoder","EVENT","ACK","BINARY_EVENT","BINARY_ACK","encodeAsBinary","encodeAsString","nsp","deconstruction","Decoder","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","payload","tryParse","isPayloadValid","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","reconPack","binData","subDestroy","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","recovered","receiveBuffer","sendBuffer","_queue","ids","acks","flags","auth","_opts","_autoConnect","subs","onpacket","subEvents","_readyState","retries","fromQueue","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","discardPacket","notifyOutgoingListeners","_a","ackTimeout","timer","withErr","reject","arg1","arg2","tryCount","pending","hasError","responseArgs","_drainQueue","currentId","_packet","_sendConnectPacket","_pid","pid","_lastOffset","sameNamespace","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","listener","sent","emitBuffered","_anyOutgoingListeners","Backoff","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","_reconnecting","reconnect","Engine","skipReconnect","openSubDestroy","errorSub","maybeReconnectOnOpen","onping","ondata","ondecoded","add","active","_close","delay","onreconnect","attempt","cache","parsed","newConnection","forceNew","multiplex","withNativeBuffer","isBuf","toStringFunc","newData2","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","bloblessData","readAsArrayBuffer","types","ERROR","tryStringify","writeEncoding","toArray","list","events","connect_timeout","connecting","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","json","disconnected","hasBin","rootNamespaceError","eio","v3","lastPing","packetBuffer","emitAll","updateSocketIds","generateId","openSub","onpong","onConnecting","processPacketQueue","subsLength","sub","managers","v5","versions","getEioProtocolVersion","find","el"],"mappings":"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"}